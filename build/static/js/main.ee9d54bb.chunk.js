(this["webpackJsonpredux-app"]=this["webpackJsonpredux-app"]||[]).push([[0],{10:function(t,e,n){t.exports={game:"ConnectX_game__1x_fZ",form:"ConnectX_form__34LiB",main:"ConnectX_main__6vhcL",main_board:"ConnectX_main_board__1BL24",title:"ConnectX_title__2bStg",board:"ConnectX_board__3OnTo",board_row:"ConnectX_board_row__CsIJA",slot:"ConnectX_slot__25hJA",slotContent:"ConnectX_slotContent__GfqZP",slotContentX:"ConnectX_slotContentX__18XTw",slotContentO:"ConnectX_slotContentO__1evBh",win:"ConnectX_win__X-N9o",scaleAnim:"ConnectX_scaleAnim__3zEhe",game_info:"ConnectX_game_info__2JF9V",controls:"ConnectX_controls__ekhdW",status:"ConnectX_status__2MWFR",moves:"ConnectX_moves__1ki_t",selected:"ConnectX_selected__1Puyt","kbd-navigation":"ConnectX_kbd-navigation__35g11",scrollableY:"ConnectX_scrollableY__1Mm7t",flipR:"ConnectX_flipR__2HwCv",animate:"ConnectX_animate__3ZyN7",flip:"ConnectX_flip__2PQK3",fall:"ConnectX_fall__13rRa"}},16:function(t,e,n){t.exports={board_row:"Tictactoe_board_row__3rgFx",status:"Tictactoe_status__1yWkH",square:"Tictactoe_square__2FLKp",selected:"Tictactoe_selected__2J0dk",win:"Tictactoe_win__3iu36","kbd-navigation":"Tictactoe_kbd-navigation__1k7WA",game:"Tictactoe_game__1L0bM",game_info:"Tictactoe_game_info__3MppA",board:"Tictactoe_board__EHRYs",game_board:"Tictactoe_game_board__10zJy",moves:"Tictactoe_moves__1SQaE",scrollableY:"Tictactoe_scrollableY__Q9GYP"}},25:function(t,e,n){t.exports={row:"Counter_row__25RA2",value:"Counter_value__1LyDH",button:"Counter_button__1Mrat",textbox:"Counter_textbox__3xGUA",asyncButton:"Counter_asyncButton__24jSS Counter_button__1Mrat"}},26:function(t,e,n){t.exports={row:"Counter_row__-ob4V",value:"Counter_value__1mJ_F",button:"Counter_button__2N3Ru",textbox:"Counter_textbox__3t7Hj",asyncButton:"Counter_asyncButton__3xT0m Counter_button__2N3Ru"}},51:function(t,e,n){},58:function(t,e,n){},60:function(t,e,n){"use strict";n.r(e);var r=n(4),a=n.n(r),o=n(35),c=n.n(o),s=(n(51),n(62)),i=n(23),u=Object(i.a)(),l=n(1),d=n(2),b=n(27),f=n(6),j=n(7),h=function(t){try{var e=JSON.stringify(t);localStorage.setItem("state",e)}catch(n){console.log(n)}},p=n(3),O=function(t){Object(f.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).goToApp=function(e){e.preventDefault(),console.log(Object(b.a)(t));var n=t.pseudoInput.value;h(n),u.push("/redux-project/")},t}return Object(d.a)(n,[{key:"render",value:function(){var t=this;return Object(p.jsx)("div",{className:"connexionBox",onSubmit:function(e){return t.goToApp(e)},children:Object(p.jsxs)("form",{className:"connexion",children:[Object(p.jsx)("input",{type:"text",placeholder:"Pseudo",required:!0,ref:function(e){t.pseudoInput=e}}),Object(p.jsx)("button",{type:"submit",children:"GO"})]})})}}]),n}(a.a.Component),m=n(9),v=n(15),g=Object(v.c)({name:"nav",initialState:{},reducers:{reset:function(t){}}}),x=g.actions.reset,y=g.reducer;function _(t){return Object(p.jsxs)("label",{className:"switch",children:[Object(p.jsx)("input",{type:"checkbox",checked:t.isOn,onClick:t.onClick,readOnly:!0}),Object(p.jsx)("span",{className:"slider"})]})}function C(t){return Object(p.jsx)("button",{className:"reset",onClick:t.onClick,children:t.title})}function N(t){var e=Object(m.b)(),n=Object.keys(t.items).map((function(e,n){return Object(p.jsx)("button",{name:e,onClick:function(e){return t.handleClick(e)},children:e},n)}));return Object(p.jsxs)("header",{className:"App-header",children:[Object(p.jsx)("div",{className:"nav-items",children:n}),Object(p.jsx)(C,{title:"Reset all",onClick:function(){return e(x())}})]})}var S=n(20),w=n(8),k=n.n(w),A=n(13);function X(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(e){return setTimeout((function(){return e({data:t})}),500)}))}var I=Object(v.b)("counter/fetchCount",function(){var t=Object(A.a)(k.a.mark((function t(e){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),T=Object(v.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(t){t.value+=1},decrement:function(t){t.value-=1},incrementByAmount:function(t,e){t.value+=e.payload},reset:function(t){t.value=0}},extraReducers:function(t){t.addCase(I.pending,(function(t){t.status="loading"})).addCase(I.fulfilled,(function(t,e){t.status="idle",t.value+=e.payload}))}}),P=T.actions,B=P.increment,F=P.decrement,q=P.incrementByAmount,E=P.reset,G=function(t){return t.counter.value},M=T.reducer,R=n(25),D=n.n(R);function J(){var t=Object(m.c)(G),e=Object(m.b)(),n=Object(r.useState)("2"),a=Object(S.a)(n,2),o=a[0],c=a[1],s=Number(o)||0;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:D.a.row,children:[Object(p.jsx)("button",{className:D.a.button,"aria-label":"Decrement value",onClick:function(){return e(F())},children:"-"}),Object(p.jsx)("span",{className:D.a.value,children:t}),Object(p.jsx)("button",{className:D.a.button,"aria-label":"Increment value",onClick:function(){return e(B())},children:"+"})]}),Object(p.jsxs)("div",{className:D.a.row,children:[Object(p.jsx)("input",{className:D.a.textbox,"aria-label":"Set increment amount",value:o,onChange:function(t){return c(t.target.value)}}),Object(p.jsx)("button",{className:D.a.button,onClick:function(){return e(q(s))},children:"Add Amount"}),Object(p.jsx)("button",{className:D.a.asyncButton,onClick:function(){return e(I(s))},children:"Add Async"}),Object(p.jsx)("button",{className:D.a.button,onClick:function(){return e((t=s,function(e,n){G(n())%2===1&&e(q(t))}));var t},children:"Add If Odd"}),Object(p.jsx)(C,{title:"Reset",onClick:function(){return e(E())}})]})]})}var L={history:[{squares:Array(9).fill(null)}],winSquares:[],xIsNext:!0,stepNumber:0,sortIsAsc:!0},Y=Object(v.c)({name:"tictactoe",initialState:L,reducers:{handleClick:function(t,e){var n=t.history.slice(0,t.stepNumber+1),r=n[n.length-1].squares.slice();t.winSquares.length||r[e.payload]||(r[e.payload]=t.xIsNext?"X":"O",t.history=n.concat([{squares:r}]),t.stepNumber=n.length,t.xIsNext=!t.xIsNext)},jumpTo:function(t,e){t.stepNumber=e.payload,t.xIsNext=e.payload%2===0},toggleSort:function(t){t.sortIsAsc=!t.sortIsAsc},reset:function(t){t.history=[{squares:Array(9).fill(null)}],t.stepNumber=0}}}),z=Y.actions,H=z.handleClick,W=z.jumpTo,Z=z.toggleSort,K=z.reset,Q=function(t){return t.tictactoe.history},U=function(t){return t.tictactoe.stepNumber},V=function(t){return t.tictactoe.xIsNext},$=function(t){return t.tictactoe.sortIsAsc},tt=Y.reducer,et=n(16),nt=n.n(et);var rt=function(t){var e="";return t.winSquares&&(e=t.winSquares.find((function(e){return e===t.index}))+1?" "+nt.a.win:""),Object(p.jsx)("button",{className:nt.a.square+e,onClick:t.onClick,children:t.value})},at=function(t){Object(f.a)(n,t);var e=Object(j.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"renderSquare",value:function(t){var e=this;return Object(p.jsx)(rt,{index:t,value:this.props.squares[t],onClick:function(){return e.props.onClick(t)},winSquares:this.props.winSquares},t)}},{key:"createBoard",value:function(){for(var t=[],e=-1,n=0;n<3;n++){for(var r=[],a=0;a<3;a++)e++,r.push(this.renderSquare(e));t.push(Object(p.jsx)("div",{className:nt.a.board_row,children:r},n))}return t}},{key:"render",value:function(){var t="undefined"===typeof this.props.isSelected,e=t?" "+nt.a.game_board:"",n=this.props.isSelected?" "+nt.a.selected:"",r=t?"":this.props.title;return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:nt.a.board+e+n,children:this.createBoard()}),Object(p.jsx)("p",{children:r})]})}}]),n}(a.a.Component);function ot(){var t=Object(m.b)(),e=Object(m.c)(Q),n=Object(m.c)(U),r=e[n],a=function(t){for(var e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],n=0;n<e.length;n++){var r=Object(S.a)(e[n],3),a=r[0],o=r[1],c=r[2];if(t[a]&&t[a]===t[o]&&t[a]===t[c])return e[n]}return[]}(r.squares),o=e.map((function(r,a){var o=a?"Move #"+a:"Game start",c=n===a;return Object(p.jsx)("li",{children:Object(p.jsx)(at,{isSelected:c,squares:e[a].squares,onClick:function(){return t(W(a))},title:o})},a)}));o=Object(m.c)($)?o:o.sort((function(t,e){return e.key-t.key}));var c,s=Object(m.c)(V);return c=a.length?"Winner: "+(s?"O":"X"):9!==n||a.length?"Next player: "+(s?"X":"O"):"Draw!",Object(p.jsxs)("div",{className:nt.a.game,children:[Object(p.jsx)(at,{squares:r.squares,winSquares:a,onClick:function(e){return t(H(e))}}),Object(p.jsxs)("div",{className:nt.a.game_info,children:[Object(p.jsx)("div",{children:c}),Object(p.jsx)(_,{onClick:function(){return t(Z())}}),Object(p.jsx)(C,{title:"Reset",onClick:function(){return t(K())}}),Object(p.jsx)("div",{className:nt.a.scrollableY,children:Object(p.jsx)("ol",{className:nt.a.moves,children:o})})]})]})}var ct=n(5),st=n(44),it=n(46),ut=Object(st.a)({apiKey:"AIzaSyDVe3axD8Y3GnxcnsnDuDz_FHCKYJcu6gg",authDomain:"redux-project-98a9a.firebaseapp.com",databaseURL:"https://redux-project-98a9a-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"redux-project-98a9a",storageBucket:"redux-project-98a9a.appspot.com",messagingSenderId:"67646127878",appId:"1:67646127878:web:507ecc4c86993503ca2887",measurementId:"G-34QJSE84ZR"});Object(it.a)(ut);function lt(t){var e=Object(ct.b)();return new Promise((function(n){Object(ct.a)(Object(ct.d)(e,"/turnAction")).then((function(r){r.exists()?r.val()!==t&&Object(ct.a)(Object(ct.d)(e,"/")).then((function(t){t.exists()?n(t.val()):console.log("No data available")})).catch((function(t){console.error(t)})):console.log("No data available")})).catch((function(t){console.error(t)}))}))}function dt(){var t=Object(ct.b)();return new Promise((function(e){Object(ct.a)(Object(ct.d)(t,"/players")).then((function(n){n.exists()?Object(ct.a)(Object(ct.d)(t,"/gameIsOn")).then((function(t){t.exists()?e({players:n.val(),gameIsOn:t.val()}):console.log("No data available")})).catch((function(t){console.error(t)})):console.log("No data available")})).catch((function(t){console.error(t)}))}))}var bt={history:[{slots:Array(42).fill(0),boardFlip:0}],stepNumber:0,gameSettings:{width:7,height:6,scoreTarget:4},nextPlayer:"X",sortIsAsc:!0,gravIsOn:!0,transitions:{slots:0,board:0},players:[],turnAction:{number:0,action:0}},ft=Object(v.b)("connectX/compareGameState",function(){var t=Object(A.a)(k.a.mark((function t(e){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lt(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),jt=Object(v.b)("connectX/readPlayers",function(){var t=Object(A.a)(k.a.mark((function t(e,n){var r,a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dt();case 2:return r=t.sent,a=r.players,Object.keys(a).length>=2&&(r.gameIsOn?n.dispatch(Ct(!1)):n.dispatch(Ct(!0))),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),ht=Object(v.c)({name:"connectX",initialState:bt,reducers:{fillSlot:function(t,e){var n=t.stepNumber,r=t.history.slice(0,n+1),a=r[n],o=a.slots.slice(),c=e.payload;if(!o[c]){var s=t.nextPlayer;if(t.gravIsOn){var i=t.gameSettings.width,u=t.gameSettings.height;a.boardFlip%2!==0&&(i=t.gameSettings.height,u=t.gameSettings.width);for(var l=Array(i*u).fill(0),d=0,b=u-1;b>0;b--)if(c>=(b-1)*i&&c<=b*i-1){d=u-b;break}if(d){for(var f=c+d*i;f>c;f-=i){if(!o[f]){c=f;break}d--}o[c]=s,d?l[c]=d:l=null}}o[c]||(o[c]=s);var j=t.turnAction;j.action||n++,t.stepNumber=n;var h=j.number+1===2;if(console.log("isEndTurn fillSlot",h),h?(t.turnAction={number:0,action:0},t.nextPlayer="X"===s?"O":"X"):(t.turnAction.number+=1,t.turnAction.action=1),r=r.slice(0,n),t.history=r.concat([{slots:o,boardFlip:a.boardFlip}]),t.transitions=l&&-1!==l.find((function(t){return 0!==t}))?{slots:l,board:0}:{slots:0,board:0},2===t.players.length){console.log("set db handleClick");var p=Object(ct.b)(),O=Object(ct.d)(p,"/history/".concat(n));Object(ct.f)(O,{slots:o,boardFlip:a.boardFlip}),h&&(O=Object(ct.d)(p,"/stepNumber/"),Object(ct.f)(O,n),O=Object(ct.d)(p,"/nextPlayer/"),Object(ct.f)(O,t.nextPlayer)),O=Object(ct.d)(p,"/turnAction/"),Object(ct.f)(O,t.turnAction.number),O=Object(ct.d)(p,"/transitions/"),Object(ct.f)(O,t.transitions)}}},changeStep:function(t,e){t.stepNumber=e.payload,t.transitions={slots:0,board:0}},toggleSort:function(t){t.sortIsAsc=!t.sortIsAsc,t.transitions={slots:0,board:0}},toggleGravity:function(t,e){var n,r=e.payload,a=t.turnAction;r?(t.gravIsOn=!t.gravIsOn,n=a.number+1===2):n=2===a.number,console.log("isEndTurn toggleGravity",n);var o=t.stepNumber,c=t.history.slice(0,o+1),s=c[o],i=s.slots.slice(),u=t.gravIsOn;if(u){var l=t.gameSettings.width,d=t.gameSettings.height;s.boardFlip%2!==0&&(l=d);for(var b=Array(l*d).fill(0),f=1,j=i.length-l-1;j>=0;j-=l){for(var h=0;h<l;h++)for(var p=f;p>0;p--){var O=j-h,m=O+l*p;if(i[O]&&!i[m]){i[m]=i[O],i[O]=0,b[m]=p;break}}f++}}if(a.action||o++,t.stepNumber=o,n?(console.log("gravity",!a.action),t.turnAction={number:0,action:0},t.nextPlayer="X"===t.nextPlayer?"O":"X"):(t.turnAction.number=r?a.number+1:a.number,t.turnAction.action=r?2:a.action),c=c.slice(0,o),t.history=c.concat([{slots:i,boardFlip:s.boardFlip}]),t.transitions={slots:u?b:0,board:r?0:t.transitions.board},2===t.players.length){console.log("set db toggleGravity");var v=Object(ct.b)(),g=Object(ct.d)(v,"/gravIsOn/");Object(ct.f)(g,u),g=Object(ct.d)(v,"/history/".concat(o)),Object(ct.f)(g,{slots:i,boardFlip:s.boardFlip}),n&&(g=Object(ct.d)(v,"/stepNumber/"),Object(ct.f)(g,o),g=Object(ct.d)(v,"/nextPlayer/"),Object(ct.f)(g,t.nextPlayer)),g=Object(ct.d)(v,"/turnAction/"),Object(ct.f)(g,t.turnAction.number),g=Object(ct.d)(v,"/transitions/"),Object(ct.f)(g,t.transitions)}},flipBoardState:function(t,e){var n=t.stepNumber,r=t.history.slice(0,n+1),a=r[n],o=a.slots.slice(),c=e.payload,s=a.boardFlip+c;-1===s&&(s=3),4===s&&(s=0);var i=t.gameSettings.width,u=t.gameSettings.height;a.boardFlip%2!==0&&(i=t.gameSettings.height,u=t.gameSettings.width);for(var l=o.slice(),d=u,b=o.length-1;b>=0;b-=i){for(var f=0;f<i;f++){var j=b-f;l[1===c?u*(j+1-(d-1)*i)-d:u*(d*i-1-j)+d-1]=o[j]}d--}var h=t.turnAction,p=h.number+1===2;console.log("isEndTurn flipBoard",p);var O=!t.gravIsOn;if(h.action||n++,t.stepNumber=n,p&&O?(t.turnAction={number:0,action:0},t.nextPlayer="X"===t.nextPlayer?"O":"X"):(t.turnAction.number+=1,t.turnAction.action=3),r=r.slice(0,n),t.history=r.concat([{slots:l,boardFlip:s}]),t.transitions={slots:0,board:-90*c},O&&2===t.players.length){console.log("set db flipBoard");var m=Object(ct.b)(),v=Object(ct.d)(m,"/history/".concat(n));Object(ct.f)(v,{slots:l,boardFlip:s}),p&&(v=Object(ct.d)(m,"/stepNumber/"),Object(ct.f)(v,n),v=Object(ct.d)(m,"/nextPlayer/"),Object(ct.f)(v,t.nextPlayer)),v=Object(ct.d)(m,"/turnAction/"),Object(ct.f)(v,t.turnAction.number),v=Object(ct.d)(m,"/transitions/"),Object(ct.f)(v,t.transitions)}},endTurn:function(t){var e={number:0,action:0};t.turnAction=e,t.nextPlayer="X"===t.nextPlayer?"O":"X";var n={slots:0,board:0};if(t.transitions=n,2===t.players.length){console.log("set db endTurn");var r=Object(ct.b)(),a=Object(ct.d)(r,"/turnAction/");Object(ct.f)(a,e),a=Object(ct.d)(r,"/nextPlayer/"),Object(ct.f)(a,t.nextPlayer),a=Object(ct.d)(r,"/transitions/"),Object(ct.f)(a,n)}},setGameSettings:function(t,e){var n=e.payload;t.gameSettings=n,t.history=[{slots:Array(n.width*n.height).fill(0),boardFlip:0}]},reset:function(t,e){var n=e.payload,r=t.history.slice(0,1);r[0].boardFlip=0;var a={slots:0,board:0};if(n){var o=Object(ct.b)(),c=Object(ct.d)(o,"/stepNumber/");Object(ct.f)(c,0),c=Object(ct.d)(o,"/history/"),Object(ct.f)(c,r),c=Object(ct.d)(o,"/nextPlayer/"),Object(ct.f)(c,"X"),c=Object(ct.d)(o,"/transitions/"),Object(ct.f)(c,a),c=Object(ct.d)(o,"/gravIsOn/"),Object(ct.f)(c,!0),c=Object(ct.d)(o,"/gameIsOn/"),Object(ct.f)(c,!0)}t.stepNumber=0,t.history=r,t.nextPlayer="X",t.transitions=a,t.gravIsOn=!0},endTwoPlayersGame:function(t){var e=Object(ct.b)();Object(ct.f)(Object(ct.d)(e,"gameIsOn"),!1).then((function(){Object(ct.e)(Object(ct.d)(e,"/players/"))}))}},extraReducers:function(t){t.addCase(ft.pending,(function(t){console.log("updateStateAsync pending")})).addCase(ft.fulfilled,(function(t,e){var n=e.payload;if(console.log("updateStateAsync",n),null===n)window.alert("Your opponent left! Reload the page to exit the current game"),t.players=[];else{t.history=n.history,t.stepNumber=n.stepNumber;var r=n.transitions;t.transitions={slots:r.slots,board:r.board},t.gravIsOn=n.gravIsOn;var a=n.turnAction;t.turnAction.number=2===a?0:a}})).addCase(jt.pending,(function(t){console.log("requestGameAsync pending")})).addCase(jt.fulfilled,(function(t,e){var n=e.payload.players;console.log("requestGameAsync",n);var r=Object.keys(n);if(1===r.length)t.players=[{pseudo:n[r[0]].pseudo,sign:"O"}],t.transitions={slots:0,board:0};else if(r.length>=2){var a=t.players.slice();t.players=a.concat([{pseudo:n[r[1]].pseudo,sign:"X"}])}}))}}),pt=ht.actions,Ot=pt.fillSlot,mt=pt.changeStep,vt=pt.toggleSort,gt=pt.toggleGravity,xt=pt.flipBoardState,yt=pt.endTurn,_t=pt.setGameSettings,Ct=pt.reset,Nt=pt.endTwoPlayersGame,St=function(t){return t.connectX.history},wt=function(t){return t.connectX.gameSettings},kt=function(t){return t.connectX.stepNumber},At=function(t){return t.connectX.sortIsAsc},Xt=function(t){return t.connectX.gravIsOn},It=function(t){return t.connectX.transitions},Tt=function(t){return t.connectX.nextPlayer},Pt=function(t){return t.connectX.players},Bt=function(t){return t.connectX.turnAction},Ft=function(t){return function(e,n){e(xt(t)),Xt(n())&&e(gt(!1))}},qt=ht.reducer,Et=n(10),Gt=n.n(Et);var Mt=function(t){var e=t.slotScore,n="",r=0;e&&(n="hasTransition ".concat(Gt.a.fall),r=Math.round(10*(.16+.189*Math.log(e)))/10);var a=t.value?"".concat(Gt.a.slotContent," ").concat("X"===t.value?Gt.a.slotContentX:Gt.a.slotContentO):"",o=t.winStyle?"wonSlot":"";return Object(p.jsx)("button",{className:"".concat(Gt.a.slot," ").concat(o),onClick:t.onClick,children:Object(p.jsx)("div",{style:{"--slotStartPos":"calc(".concat(-1*e*125,"% + ").concat(e,"px)"),"--speed":"".concat(r,"s")},className:"".concat(a," ").concat(n),onTransitionEnd:t.handleTransitionEnd})})};function Rt(){var t=Array.from(document.querySelectorAll(".wonSlot"));console.log(t),t.forEach((function(t){t.classList.add(Gt.a.win)}))}var Dt=function(t){Object(f.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).handleTransitionEnd=function(t){Rt()},t.renderSlot=function(e,n){var r,a=n?void 0:function(){return t.props.onClick(e)},o=n?t.props.winIndexes:null,c=!(!o||!o.includes(e)),s=t.props.transitions?t.props.transitions.slots:null,i=0;if(s&&s[e]&&(i=s[e],n)){var u=s.filter((function(t){return 0!==t})).sort((function(t,e){return e-t}))[0];e===s.findIndex((function(t){return t===u}))&&(r=function(e){return t.handleTransitionEnd(e)})}return Object(p.jsx)(Mt,{value:t.props.slots[e],onClick:a,slotScore:i,winStyle:c,handleTransitionEnd:r},e)},t.createBoard=function(e,n,r){for(var a=[],o=0,c=0;c<e.height;c++){for(var s=[],i=0;i<e.width;i++)s.push(t.renderSlot(o,r)),o++;a.push(Object(p.jsx)("div",{className:Gt.a.board_row,children:s},c))}var u=t.props.transitions&&t.props.transitions.board?t.props.transitions.board:0;return Object(p.jsx)("div",{style:{"--boardStartPos":"rotateZ(".concat(u,"deg)")},className:"\n              ".concat(0===u?"":"hasTransition ".concat(Gt.a.flip)," \n              ").concat(Gt.a.board," \n              ").concat(n?Gt.a.main_board:""," \n              ").concat(t.props.isSelected?Gt.a.selected:"","\n            "),onTransitionEnd:n&&r?function(){return t.handleTransitionEnd()}:void 0,children:a})},t.styleBoard=function(t,e){var n=Math.floor(.55*window.innerHeight/(e.height*t)),r=Math.floor(.55*window.innerHeight/(e.width*t));n=n<=r?n:r;var a=Math.round(e.height/130*10)/10;return a<=.5&&(a=0),{"--boardWidth":n*e.width+"px","--boardHeight":n*e.height+"px","--slotSize":n+1+"px","--fontSize":a+"em"}},t}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){var t=this.props.transitions;this.props.isMainBoard&&(t&&(t.slots||t.board)?Array.from(document.querySelectorAll(".hasTransition")).forEach((function(t){t.classList.remove(Gt.a.animate),setTimeout((function(){t.classList.add(Gt.a.animate)}),0)})):this.props.winIndexes.length&&Rt())}},{key:"render",value:function(){var t=this.props.boardParams;this.props.flip%2!==0&&(t={width:t.height,height:t.width});var e=this.props.isMainBoard,n=e?"":this.props.title,r=!(!e||!this.props.winIndexes.length);return Object(p.jsxs)("div",{style:e?this.styleBoard(1,t):this.styleBoard(4,t),className:e?Gt.a.main:"",children:[this.createBoard(t,e,r),Object(p.jsx)("p",{className:Gt.a.title,children:n})]})}}]),n}(a.a.Component),Jt=function(t){Object(f.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).prepareInfos=function(e){e.preventDefault();var n=parseInt(t.width.value),r=parseInt(t.height.value),a=n<=r?n:r,o=Math.round(.8+1.7*Math.log((n+r)/2)),c={width:n,height:r,scoreTarget:a<=o?a:o};t.props.sendGameSettings(c),t.infosForm.reset()},t}return Object(d.a)(n,[{key:"render",value:function(){var t=this;return Object(p.jsxs)("form",{className:Gt.a.form,onSubmit:function(e){return t.prepareInfos(e)},ref:function(e){return t.infosForm=e},children:[Object(p.jsx)("input",{type:"text",pattern:"\\b([3-9]|[12][0-9]|3[0-2])\\b",maxLength:this.props.length,ref:function(e){return t.width=e}}),Object(p.jsx)("input",{type:"text",pattern:"\\b([3-9]|[12][0-9]|3[0-2])\\b",maxLength:this.props.length,ref:function(e){return t.height=e}}),Object(p.jsx)("button",{type:"submit",children:"Envoyer!"})]})}}]),n}(a.a.Component);function Lt(t){var e=Object(m.b)(),n=Object(m.c)(St),r=Object(m.c)(kt),a=n[r].slots,o=Object(m.c)(Bt),c=Object(m.c)(Pt),s=t.pseudo,i=Object(p.jsx)(Jt,{sendGameSettings:function(t){return e((n=t,function(t){t(Ct()),t(_t(n))}));var n}}),u=Object(p.jsx)("button",{onClick:function(){return e(function(t){return function(e,n){Object(ct.f)(Object(ct.c)(Object(ct.d)(Object(ct.b)(),"players")),{pseudo:t}).then((function(){e(jt());var t=setInterval((function(){Pt(n()).length?e(jt()):clearInterval(t)}),4e3)})).catch((function(t){}))}}(s))},children:"Request game"}),l=null,d=function(t){return e(Ot(t))},b=function(){return e(gt(!0))},f=function(){return e(Ft(1))},j=function(){return e(Ft(-1))},h=Object(m.c)(Tt);if(c.length>0){var O=c.find((function(t){return t.pseudo===s})),v=-1!==O,g=2===c.length&&!v,x=1===c.length&&v,y=2===c.length&&v;if(console.log("myPlayer",O),console.log("player",h),(x||y)&&(window.onunload=function(t){e(Nt())},i=null),(g||v)&&(u=null),y)O.sign===h||(e((function(t,e){var n=setInterval((function(){Pt(e()).length?clearInterval(n):t(ft(Bt(e())))}),3500)})),d=function(){},b=function(){},f=function(){},j=function(){})}(console.log("turnAction",o),o.number)&&(1===o.action?(d=function(){},l=Object(p.jsx)("button",{onClick:function(){return e(yt())},children:"End turn"})):(b=function(){},f=function(){},j=function(){}));var N=Object(m.c)(wt),S=n[r].boardFlip,w={width:N.width,height:N.height},k=Object(m.c)(It),A=[],X=N.scoreTarget;if(console.log("scoreTarget",X),r>=2*X-1){var I=S%2===0?w.width:w.height;A=function(t,e,n,r){var a=[],o=[],c=[];for(var s in e)e[s]!==t[s]&&c.push(parseInt(s));for(var i=c.length-1;i>=0;i--){var u=c[i];if(!o.includes(u)){for(var l=e[u],d=0,b=u;b>u-n&&e[b-1]&&e[b-1]===l&&b%r!==0;b--)d++,a.push(b-1);for(var f=0,j=u;j<u+n&&e[j+1]&&e[j+1]===l&&(j+1)%r!==0;j++)f++,a.push(j+1);d+f>=n-1&&(a.push(u),o=o.concat(a)),a=[];for(var h=0,p=u;p>u-n*r&&e[p-r]&&e[p-r]===l;p-=r)h++,a.push(p-r);for(var O=0,m=u;m<u+n*r&&e[m+r]&&e[m+r]===l;m+=r)O++,a.push(m+r);h+O>=n-1&&(a.push(u),o=o.concat(a)),a=[];for(var v=0,g=u;g>u-n*(r+1)&&e[g-r-1]&&e[g-r-1]===l&&g%r!==0;g-=r+1)v++,a.push(g-r-1);for(var x=0,y=u;y<u+n*(r+1)&&e[y+r+1]&&e[y+r+1]===l&&(y+1)%r!==0;y+=r+1)x++,a.push(y+r+1);v+x>=n-1&&(a.push(u),o=o.concat(a)),a=[];for(var _=0,C=u;C>u-n*(r-1)&&e[C-r+1]&&e[C-r+1]===l&&(C+1)%r!==0;C-=r-1)_++,a.push(C-r+1);for(var N=0,S=u;S<u+n*(r-1)&&e[S+r-1]&&e[S+r-1]===l&&S%r!==0;S+=r-1)N++,a.push(S+r-1);_+N>=n-1&&(a.push(u),o=o.concat(a)),a=[]}}return o}(n[r-1].slots,a,X,I)}var T,P=n.map((function(t,a){var o=a?"Move #"+a:"Game start",c=r===a,s=a===n.length-1;return Object(p.jsx)("li",{children:Object(p.jsx)(Dt,{boardParams:w,isSelected:c,slots:n[a].slots,transitions:s?k:null,flip:n[a].boardFlip,onClick:function(){return e(function(t){return function(e,n){e(mt(t))}}(a))},title:o})},a)})),B=Object(m.c)(At);if(P=B?P:P.sort((function(t,e){return e.key-t.key})),A.length){var F=0;A.forEach((function(t){"X"===a[t]&&F++})),T=F>A.length-F?"Winner: X":F<A.length-F?"Winner: O":"Draw!"}else T=A.length||r!==a.length?"Next player: "+h:"Draw!";return Object(p.jsxs)("div",{className:Gt.a.game,children:[i,Object(p.jsx)(Dt,{isMainBoard:!0,boardParams:w,slots:a,transitions:k,flip:S,winIndexes:A,onClick:function(t){return d(t)}}),Object(p.jsxs)("div",{className:Gt.a.game_info,children:[Object(p.jsx)("div",{className:Gt.a.status,children:T}),Object(p.jsxs)("div",{className:Gt.a.controls,children:[u,Object(p.jsx)("button",{onClick:function(){return f()},children:"Flip right"}),Object(p.jsx)("button",{onClick:function(){return j()},children:"Flip left"}),Object(p.jsx)(_,{isOn:!B,onClick:function(){return e(vt())}}),Object(p.jsx)(_,{isOn:!Object(m.c)(Xt),onClick:function(){return b()}}),l,Object(p.jsx)(C,{title:"Reset",onClick:function(){return e(Ct())}})]}),Object(p.jsx)("div",{className:Gt.a.scrollableY,children:Object(p.jsx)("ol",{className:Gt.a.moves,children:P})})]})]})}function Yt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(e){return setTimeout((function(){return e({data:t})}),500)}))}var zt=Object(v.b)("counter/fetchCount",function(){var t=Object(A.a)(k.a.mark((function t(e){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yt(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Ht=Object(v.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(t){t.value+=1},decrement:function(t){t.value-=1},incrementByAmount:function(t,e){t.value+=e.payload}},extraReducers:function(t){t.addCase(zt.pending,(function(t){t.status="loading"})).addCase(zt.fulfilled,(function(t,e){t.status="idle",t.value+=e.payload}))}}),Wt=Ht.actions,Zt=Wt.increment,Kt=Wt.decrement,Qt=Wt.incrementByAmount,Ut=function(t){return t.counter.value},Vt=(Ht.reducer,n(26)),$t=n.n(Vt);function te(){var t=Object(m.c)(Ut),e=Object(m.b)(),n=Object(r.useState)("2"),a=Object(S.a)(n,2),o=a[0],c=a[1],s=Number(o)||0;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:$t.a.row,children:[Object(p.jsx)("button",{className:$t.a.button,"aria-label":"Decrement value",onClick:function(){return e(Kt())},children:"-"}),Object(p.jsx)("span",{className:$t.a.value,children:t}),Object(p.jsx)("button",{className:$t.a.button,"aria-label":"Increment value",onClick:function(){return e(Zt())},children:"+"})]}),Object(p.jsxs)("div",{className:$t.a.row,children:[Object(p.jsx)("input",{className:$t.a.textbox,"aria-label":"Set increment amount",value:o,onChange:function(t){return c(t.target.value)}}),Object(p.jsx)("button",{className:$t.a.button,onClick:function(){return e(Qt(s))},children:"Add Amount"}),Object(p.jsx)("button",{className:$t.a.asyncButton,onClick:function(){return e(zt(s))},children:"Add Async"}),Object(p.jsx)("button",{className:$t.a.button,onClick:function(){return e((t=s,function(e,n){Ut(n())%2===1&&e(Qt(t))}));var t},children:"Add If Odd Tbd"})]})]})}n(58);var ee=function(t){Object(f.a)(n,t);var e=Object(j.a)(n);function n(){var t;return Object(l.a)(this,n),(t=e.call(this)).state={items:{Counter:J,TicTacToe:ot,ConnectX:Lt,Tbd:te},itemSelected:null,userPseudo:""},t.handleClick=t.handleClick.bind(Object(b.a)(t)),t}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=this.state.userPseudo;console.log("componentDidMount",t),t||(t=function(){try{var t=localStorage.getItem("state");if(console.log("serializedState",t),null===t)return;return console.log("serializedState",JSON.parse(t)),JSON.parse(t)}catch(e){return}}(),console.log("pseudo after loadState",t),t||(t=""),this.setState({userPseudo:t}),t||u.push("/redux-project/login"))}},{key:"handleClick",value:function(t){this.setState({itemSelected:t.target.name})}},{key:"render",value:function(){var t=this.state.userPseudo;console.log("render",t);var e=this.state.itemSelected?a.a.createElement(this.state.items[this.state.itemSelected],{pseudo:t}):null;return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(N,{items:this.state.items,handleClick:this.handleClick}),Object(p.jsx)("div",{className:"main",children:e})]})}}]),n}(r.Component),ne=function(){return Object(p.jsx)("h2",{className:"notFound",children:"Nothing to see here"})},re=n(18),ae=n(21),oe=Object(ae.b)({nav:y,counter:M,tictactoe:tt,connectX:qt}),ce=Object(v.d)({serializableCheck:!1}),se=Object(v.a)({reducer:function(t,e){return"nav/reset"===e.type&&(t=void 0),oe(t,e)},middleware:Object(re.a)(ce)}),ie="/redux-project";c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(m.a,{store:se,children:Object(p.jsx)(s.b,{history:u,children:Object(p.jsxs)(s.c,{children:[Object(p.jsx)(s.a,{exact:!0,path:"".concat(ie,"/login"),component:O}),Object(p.jsx)(s.a,{path:"".concat(ie),component:ee}),Object(p.jsx)(s.a,{component:ne})]})})})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.ee9d54bb.chunk.js.map