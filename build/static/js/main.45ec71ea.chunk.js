(this["webpackJsonpredux-app"]=this["webpackJsonpredux-app"]||[]).push([[0],{10:function(t,e,n){t.exports={game:"ConnectX_game__1x_fZ",form:"ConnectX_form__34LiB",main:"ConnectX_main__6vhcL",main_board:"ConnectX_main_board__1BL24",title:"ConnectX_title__2bStg",board:"ConnectX_board__3OnTo",board_row:"ConnectX_board_row__CsIJA",slot:"ConnectX_slot__25hJA",slotContent:"ConnectX_slotContent__GfqZP",slotContentX:"ConnectX_slotContentX__18XTw",slotContentO:"ConnectX_slotContentO__1evBh",win:"ConnectX_win__X-N9o",scaleAnim:"ConnectX_scaleAnim__3zEhe",game_info:"ConnectX_game_info__2JF9V",controls:"ConnectX_controls__ekhdW",status:"ConnectX_status__2MWFR",moves:"ConnectX_moves__1ki_t",selected:"ConnectX_selected__1Puyt","kbd-navigation":"ConnectX_kbd-navigation__35g11",scrollableY:"ConnectX_scrollableY__1Mm7t",flipR:"ConnectX_flipR__2HwCv",animate:"ConnectX_animate__3ZyN7",flip:"ConnectX_flip__2PQK3",fall:"ConnectX_fall__13rRa"}},16:function(t,e,n){t.exports={board_row:"Tictactoe_board_row__3rgFx",status:"Tictactoe_status__1yWkH",square:"Tictactoe_square__2FLKp",selected:"Tictactoe_selected__2J0dk",win:"Tictactoe_win__3iu36","kbd-navigation":"Tictactoe_kbd-navigation__1k7WA",game:"Tictactoe_game__1L0bM",game_info:"Tictactoe_game_info__3MppA",board:"Tictactoe_board__EHRYs",game_board:"Tictactoe_game_board__10zJy",moves:"Tictactoe_moves__1SQaE",scrollableY:"Tictactoe_scrollableY__Q9GYP"}},25:function(t,e,n){t.exports={row:"Counter_row__25RA2",value:"Counter_value__1LyDH",button:"Counter_button__1Mrat",textbox:"Counter_textbox__3xGUA",asyncButton:"Counter_asyncButton__24jSS Counter_button__1Mrat"}},26:function(t,e,n){t.exports={row:"Counter_row__-ob4V",value:"Counter_value__1mJ_F",button:"Counter_button__2N3Ru",textbox:"Counter_textbox__3t7Hj",asyncButton:"Counter_asyncButton__3xT0m Counter_button__2N3Ru"}},51:function(t,e,n){},56:function(t,e,n){t.exports={board_row:"Nav_board_row__3-19E",status:"Nav_status__2SMaQ",square:"Nav_square__l5M2q",selected:"Nav_selected__3hogA",win:"Nav_win__1dR1J","kbd-navigation":"Nav_kbd-navigation__3izzR",game:"Nav_game__8RKFz",game_info:"Nav_game_info__31PA2",board:"Nav_board__3uLy7",game_board:"Nav_game_board__3X1uY",moves:"Nav_moves__1bJFZ",scrollableY:"Nav_scrollableY__3DVvq"}},59:function(t,e,n){},61:function(t,e,n){"use strict";n.r(e);var r=n(4),a=n.n(r),o=n(35),c=n.n(o),s=(n(51),n(63)),i=n(23),u=Object(i.a)(),l=n(1),d=n(2),b=n(27),f=n(5),h=n(6),j=function(t){try{var e=JSON.stringify(t);localStorage.setItem("state",e)}catch(n){console.log(n)}},p=n(3),v=function(t){Object(f.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).goToApp=function(e){e.preventDefault(),console.log(Object(b.a)(t));var n=t.pseudoInput.value;j(n),u.push("/redux-project/")},t}return Object(d.a)(n,[{key:"render",value:function(){var t=this;return Object(p.jsx)("div",{className:"connexionBox",onSubmit:function(e){return t.goToApp(e)},children:Object(p.jsxs)("form",{className:"connexion",children:[Object(p.jsx)("input",{type:"text",placeholder:"Pseudo",required:!0,ref:function(e){t.pseudoInput=e}}),Object(p.jsx)("button",{type:"submit",children:"GO"})]})})}}]),n}(a.a.Component),O=(n.p,n(9)),m=n(15),g=Object(m.c)({name:"nav",initialState:{},reducers:{reset:function(t){}}}),_=g.actions.reset,x=g.reducer;function y(t){return Object(p.jsxs)("label",{className:"switch",children:[Object(p.jsx)("input",{type:"checkbox",checked:t.isOn,onClick:t.onClick,readOnly:!0}),Object(p.jsx)("span",{className:"slider"})]})}function C(t){return Object(p.jsx)("button",{className:"reset",onClick:t.onClick,children:t.title})}n(56);function N(t){var e=Object(O.b)(),n=Object.keys(t.items).map((function(e,n){return Object(p.jsx)("button",{name:e,onClick:function(e){return t.handleClick(e)},children:e},n)}));return Object(p.jsxs)("header",{className:"App-header",children:[Object(p.jsx)("div",{className:"nav-items",children:n}),Object(p.jsx)(C,{title:"Reset all",onClick:function(){return e(_())}})]})}var w=n(20),S=n(8),k=n.n(S),A=n(13);function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(e){return setTimeout((function(){return e({data:t})}),500)}))}var X=Object(m.b)("counter/fetchCount",function(){var t=Object(A.a)(k.a.mark((function t(e){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),T=Object(m.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(t){t.value+=1},decrement:function(t){t.value-=1},incrementByAmount:function(t,e){t.value+=e.payload},reset:function(t){t.value=0}},extraReducers:function(t){t.addCase(X.pending,(function(t){t.status="loading"})).addCase(X.fulfilled,(function(t,e){t.status="idle",t.value+=e.payload}))}}),q=T.actions,M=q.increment,P=q.decrement,F=q.incrementByAmount,B=q.reset,R=function(t){return t.counter.value},G=T.reducer,E=n(25),D=n.n(E);function J(){var t=Object(O.c)(R),e=Object(O.b)(),n=Object(r.useState)("2"),a=Object(w.a)(n,2),o=a[0],c=a[1],s=Number(o)||0;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:D.a.row,children:[Object(p.jsx)("button",{className:D.a.button,"aria-label":"Decrement value",onClick:function(){return e(P())},children:"-"}),Object(p.jsx)("span",{className:D.a.value,children:t}),Object(p.jsx)("button",{className:D.a.button,"aria-label":"Increment value",onClick:function(){return e(M())},children:"+"})]}),Object(p.jsxs)("div",{className:D.a.row,children:[Object(p.jsx)("input",{className:D.a.textbox,"aria-label":"Set increment amount",value:o,onChange:function(t){return c(t.target.value)}}),Object(p.jsx)("button",{className:D.a.button,onClick:function(){return e(F(s))},children:"Add Amount"}),Object(p.jsx)("button",{className:D.a.asyncButton,onClick:function(){return e(X(s))},children:"Add Async"}),Object(p.jsx)("button",{className:D.a.button,onClick:function(){return e((t=s,function(e,n){R(n())%2===1&&e(F(t))}));var t},children:"Add If Odd"}),Object(p.jsx)(C,{title:"Reset",onClick:function(){return e(B())}})]})]})}var Y={history:[{squares:Array(9).fill(null)}],winSquares:[],xIsNext:!0,stepNumber:0,sortIsAsc:!0},L=Object(m.c)({name:"tictactoe",initialState:Y,reducers:{handleClick:function(t,e){var n=t.history.slice(0,t.stepNumber+1),r=n[n.length-1].squares.slice();t.winSquares.length||r[e.payload]||(r[e.payload]=t.xIsNext?"X":"O",t.history=n.concat([{squares:r}]),t.stepNumber=n.length,t.xIsNext=!t.xIsNext)},jumpTo:function(t,e){t.stepNumber=e.payload,t.xIsNext=e.payload%2===0},toggleSort:function(t){t.sortIsAsc=!t.sortIsAsc},reset:function(t){t.history=[{squares:Array(9).fill(null)}],t.stepNumber=0}}}),z=L.actions,H=z.handleClick,W=z.jumpTo,Z=z.toggleSort,K=z.reset,Q=function(t){return t.tictactoe.history},V=function(t){return t.tictactoe.stepNumber},U=function(t){return t.tictactoe.xIsNext},$=function(t){return t.tictactoe.sortIsAsc},tt=L.reducer,et=n(16),nt=n.n(et);var rt=function(t){var e="";return t.winSquares&&(e=t.winSquares.find((function(e){return e===t.index}))+1?" "+nt.a.win:""),Object(p.jsx)("button",{className:nt.a.square+e,onClick:t.onClick,children:t.value})},at=function(t){Object(f.a)(n,t);var e=Object(h.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"renderSquare",value:function(t){var e=this;return Object(p.jsx)(rt,{index:t,value:this.props.squares[t],onClick:function(){return e.props.onClick(t)},winSquares:this.props.winSquares},t)}},{key:"createBoard",value:function(){for(var t=[],e=-1,n=0;n<3;n++){for(var r=[],a=0;a<3;a++)e++,r.push(this.renderSquare(e));t.push(Object(p.jsx)("div",{className:nt.a.board_row,children:r},n))}return t}},{key:"render",value:function(){var t="undefined"===typeof this.props.isSelected,e=t?" "+nt.a.game_board:"",n=this.props.isSelected?" "+nt.a.selected:"",r=t?"":this.props.title;return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:nt.a.board+e+n,children:this.createBoard()}),Object(p.jsx)("p",{children:r})]})}}]),n}(a.a.Component);function ot(){var t=Object(O.b)(),e=Object(O.c)(Q),n=Object(O.c)(V),r=e[n],a=function(t){for(var e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],n=0;n<e.length;n++){var r=Object(w.a)(e[n],3),a=r[0],o=r[1],c=r[2];if(t[a]&&t[a]===t[o]&&t[a]===t[c])return e[n]}return[]}(r.squares),o=e.map((function(r,a){var o=a?"Move #"+a:"Game start",c=n===a;return Object(p.jsx)("li",{children:Object(p.jsx)(at,{isSelected:c,squares:e[a].squares,onClick:function(){return t(W(a))},title:o})},a)}));o=Object(O.c)($)?o:o.sort((function(t,e){return e.key-t.key}));var c,s=Object(O.c)(U);return c=a.length?"Winner: "+(s?"O":"X"):9!==n||a.length?"Next player: "+(s?"X":"O"):"Draw!",Object(p.jsxs)("div",{className:nt.a.game,children:[Object(p.jsx)(at,{squares:r.squares,winSquares:a,onClick:function(e){return t(H(e))}}),Object(p.jsxs)("div",{className:nt.a.game_info,children:[Object(p.jsx)("div",{children:c}),Object(p.jsx)(y,{onClick:function(){return t(Z())}}),Object(p.jsx)(C,{title:"Reset",onClick:function(){return t(K())}}),Object(p.jsx)("div",{className:nt.a.scrollableY,children:Object(p.jsx)("ol",{className:nt.a.moves,children:o})})]})]})}var ct=n(7),st=n(39),it=n(46),ut=Object(st.a)({apiKey:"AIzaSyDVe3axD8Y3GnxcnsnDuDz_FHCKYJcu6gg",authDomain:"redux-project-98a9a.firebaseapp.com",databaseURL:"https://redux-project-98a9a-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"redux-project-98a9a",storageBucket:"redux-project-98a9a.appspot.com",messagingSenderId:"67646127878",appId:"1:67646127878:web:507ecc4c86993503ca2887",measurementId:"G-34QJSE84ZR"});Object(it.a)(ut);function lt(t){var e=Object(ct.b)();return new Promise((function(n){Object(ct.a)(Object(ct.d)(e,"/players")).then((function(r){r.exists()?Object(ct.a)(Object(ct.d)(e,"/turnAction")).then((function(r){t.exists()?r.val()!==t&&Object(ct.a)(Object(ct.d)(e,"/")).then((function(t){t.exists()?n(t.val()):console.log("No data available")})).catch((function(t){console.error(t)})):console.log("No data available")})).catch((function(t){console.error(t)})):n(null)})).catch((function(t){console.error(t)}))}))}function dt(){var t=Object(ct.b)();return new Promise((function(e){Object(ct.a)(Object(ct.d)(t,"/players")).then((function(n){n.exists()?Object(ct.a)(Object(ct.d)(t,"/gameIsOn")).then((function(t){t.exists()?e({players:n.val(),gameIsOn:t.val()}):console.log("No data available")})).catch((function(t){console.error(t)})):console.log("No data available")})).catch((function(t){console.error(t)}))}))}var bt={history:[{slots:Array(42).fill(0),boardFlip:0}],stepNumber:0,gameSettings:{width:7,height:6,scoreTarget:4},sortIsAsc:!0,gravIsOn:!0,transitions:{slots:0,board:0},twoPlayersMode:!1,players:[],turnAction:0},ft=Object(m.b)("connectX/compareGameState",function(){var t=Object(A.a)(k.a.mark((function t(e){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lt(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),ht=Object(m.b)("connectX/readPlayers",function(){var t=Object(A.a)(k.a.mark((function t(e,n){var r,a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dt();case 2:return r=t.sent,a=r.players,Object.keys(a).length>=2&&n.dispatch(yt(!1)),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),jt=Object(m.c)({name:"connectX",initialState:bt,reducers:{handleClick:function(t,e){var n=t.stepNumber,r=t.history.slice(0,n+1),a=r[n],o=a.slots.slice(),c=e.payload;if(!o[c]){if(t.gravIsOn){if(a.boardFlip%2===0)var s=t.gameSettings.width,i=t.gameSettings.height;else s=t.gameSettings.height,i=t.gameSettings.width;for(var u=Array(s*i).fill(0),l=0,d=i-1;d>0;d--)if(c>=(d-1)*s&&c<=d*s-1){l=i-d;break}if(l){for(var b=c+l*s;b>c;b-=s){if(!o[b]){c=b;break}l--}o[c]=n%2===0?"X":"O",l?u[c]=l:u=null}}if(o[c]||(o[c]=n%2===0?"X":"O"),t.history=r.concat([{slots:o,boardFlip:a.boardFlip}]),t.stepNumber=r.length,t.turnAction+=1,t.transitions=u&&-1!==u.find((function(t){return 0!==t}))?{slots:u,board:0}:{slots:0,board:0},t.twoPlayersMode){console.log("set db handleClick");var f=Object(ct.b)();n=t.stepNumber;var h=Object(ct.d)(f,"/history/".concat(n));Object(ct.f)(h,{slots:o,boardFlip:a.boardFlip}),h=Object(ct.d)(f,"/stepNumber/"),Object(ct.f)(h,n),h=Object(ct.d)(f,"/turnAction/"),Object(ct.f)(h,t.turnAction),h=Object(ct.d)(f,"/transitions/"),Object(ct.f)(h,t.transitions)}t.turnAction=0}},changeStep:function(t,e){t.stepNumber=e.payload,t.transitions={slots:0,board:0}},toggleSort:function(t){t.sortIsAsc=!t.sortIsAsc,t.transitions={slots:0,board:0}},toggleGravity:function(t,e){var n=e.payload,r=t.twoPlayersMode,a=Object(ct.b)(),o=Object(ct.d)(a,"/gravIsOn/");if(n&&(t.gravIsOn=!t.gravIsOn,t.turnAction+=1,t.twoPlayersMode&&(Object(ct.f)(o,t.gravIsOn),o=Object(ct.d)(a,"/turnAction/"),Object(ct.f)(o,t.turnAction))),t.gravIsOn){var c=t.stepNumber,s=t.history.slice(0,c+1),i=s[c],u=i.slots.slice(),l=!1,d=t.gameSettings.width,b=t.gameSettings.height,f=Array(d*b).fill(0);i.boardFlip%2!==0&&(d=b);for(var h=1,j=u.length-d-1;j>=0;j-=d){for(var p=0;p<d;p++)for(var v=h;v>0;v--){var O=j-p,m=O+d*v;if(u[O]&&!u[m]){u[m]=u[O],u[O]=0,l=!0,f[m]=v;break}}h++}l&&(s=s.slice(0,c),t.history=s.concat([{slots:u,boardFlip:i.boardFlip}]),t.transitions={slots:f,board:n?0:t.transitions.board},t.twoPlayersMode&&(console.log("set db toggleGravity"),o=Object(ct.d)(a,"/history/".concat(c)),Object(ct.f)(o,{slots:u,boardFlip:i.boardFlip}),o=Object(ct.d)(a,"/turnAction/"),Object(ct.f)(o,t.turnAction),o=Object(ct.d)(a,"/transitions/"),Object(ct.f)(o,t.transitions)))}else r&&Object(ct.f)(Object(ct.d)(Object(ct.b)(),"/transitions/"),{slots:0,board:0}),t.transitions={slots:0,board:0}},flipBoardState:function(t,e){var n=t.stepNumber,r=t.history.slice(0,n+1),a=r[n],o=a.slots.slice(),c=e.payload,s=a.boardFlip+c;if(-1===s&&(s=3),4===s&&(s=0),s%2===0)var i=t.gameSettings.height,u=t.gameSettings.width;else i=t.gameSettings.width,u=t.gameSettings.height;for(var l=o.slice(),d=u,b=o.length-1;b>=0;b-=i){for(var f=0;f<i;f++){var h=b-f;l[1===c?u*(h+1-(d-1)*i)-d:u*(d*i-1-h)+d-1]=o[h]}d--}if(t.turnAction+=1,r=r.slice(0,n),t.history=r.concat([{slots:l,boardFlip:s}]),t.transitions={slots:0,board:-90*c},!t.gravIsOn&&t.twoPlayersMode){console.log("set db flipBoard");var j=Object(ct.b)(),p=Object(ct.d)(j,"/history/".concat(n));Object(ct.f)(p,{slots:l,boardFlip:s}),p=Object(ct.d)(j,"/transitions/"),Object(ct.f)(p,t.transitions),p=Object(ct.d)(j,"/turnAction/"),Object(ct.f)(p,t.turnAction)}},setGameSettings:function(t,e){var n=e.payload;t.gameSettings=n,t.history=[{slots:Array(n.width*n.height).fill(0),boardFlip:0}]},reset:function(t,e){if(e.payload){var n=Object(ct.b)();Object(ct.f)(Object(ct.d)(n,"gameIsOn"),!1).then((function(){Object(ct.e)(Object(ct.d)(n,"/players/"))}))}else t.history=t.history.slice(0,1),t.stepNumber=0,t.transitions={slots:0,board:0},t.gravIsOn=!0,t.sortIsAsc=!0}},extraReducers:function(t){t.addCase(ft.pending,(function(t){console.log("updateStateAsync pending")})).addCase(ft.fulfilled,(function(t,e){var n=e.payload;if(console.log("updateStateAsync",n),null===n)window.alert("Your opponent left! Reload the page to exit the current game"),t.twoPlayersMode=!1;else{t.history=n.history,t.stepNumber=n.stepNumber;var r=n.transitions;t.transitions={slots:r.slots,board:r.board},t.gravIsOn=n.gravIsOn;var a=n.turnAction;t.turnAction=2===a?0:a}})).addCase(ht.pending,(function(t){console.log("requestGameAsync pending")})).addCase(ht.fulfilled,(function(t,e){var n=e.payload,r=n.players;console.log("requestGameAsync",r);var a=Object.keys(r);if(1===a.length)t.players=[{pseudo:r[a[0]].pseudo,sign:"O"}],t.transitions={slots:0,board:0};else if(a.length>=2){var o=t.players.slice();t.players=o.concat([{pseudo:r[a[1]].pseudo,sign:"X"}]),t.twoPlayersMode=!0;var c=t.history.slice(0,1);if(!n.gameIsOn){console.log("set db requestGame");var s=Object(ct.b)(),i=Object(ct.d)(s,"/history/");Object(ct.f)(i,c),i=Object(ct.d)(s,"/stepNumber/"),Object(ct.f)(i,0),i=Object(ct.d)(s,"/transitions/"),Object(ct.f)(i,{slots:0,board:0}),i=Object(ct.d)(s,"/gravIsOn/"),Object(ct.f)(i,!0),i=Object(ct.d)(s,"/gameIsOn/"),Object(ct.f)(i,!0)}}}))}}),pt=jt.actions,vt=pt.handleClick,Ot=pt.changeStep,mt=pt.toggleSort,gt=pt.toggleGravity,_t=pt.flipBoardState,xt=pt.setGameSettings,yt=pt.reset,Ct=function(t){return t.connectX.history},Nt=function(t){return t.connectX.gameSettings},wt=function(t){return t.connectX.stepNumber},St=function(t){return t.connectX.sortIsAsc},kt=function(t){return t.connectX.gravIsOn},At=function(t){return t.connectX.transitions},It=function(t){return t.connectX.players},Xt=function(t){return t.connectX.twoPlayersMode},Tt=function(t){return t.connectX.turnAction},qt=function(t){return function(e,n){e(_t(t)),kt(n())&&e(gt(!1))}},Mt=jt.reducer,Pt=n(10),Ft=n.n(Pt);var Bt=function(t){var e=t.slotScore,n="",r=0;e&&(n="hasTransition ".concat(Ft.a.fall),r=Math.round(10*(.16+.189*Math.log(e)))/10);var a=t.value?"".concat(Ft.a.slotContent," ").concat("X"===t.value?Ft.a.slotContentX:Ft.a.slotContentO):"",o=t.winStyle?"wonSlot":"";return Object(p.jsx)("button",{className:"".concat(Ft.a.slot," ").concat(o),onClick:t.onClick,children:Object(p.jsx)("div",{style:{"--slotStartPos":"calc(".concat(-1*e*125,"% + ").concat(e,"px)"),"--speed":"".concat(r,"s")},className:"".concat(a," ").concat(n),onTransitionEnd:t.handleTransitionEnd})})};function Rt(){var t=Array.from(document.querySelectorAll(".wonSlot"));console.log(t),t.forEach((function(t){t.classList.add(Ft.a.win)}))}var Gt=function(t){Object(f.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).handleTransitionEnd=function(t){Rt()},t.renderSlot=function(e,n){var r,a=n?void 0:function(){return t.props.onClick(e)},o=n?t.props.winIndexes:null,c=!(!o||!o.includes(e)),s=t.props.transitions?t.props.transitions.slots:null,i=0;if(s&&s[e]&&(i=s[e],n)){var u=s.filter((function(t){return 0!==t})).sort((function(t,e){return e-t}))[0];e===s.findIndex((function(t){return t===u}))&&(r=function(e){return t.handleTransitionEnd(e)})}return Object(p.jsx)(Bt,{value:t.props.slots[e],onClick:a,slotScore:i,winStyle:c,handleTransitionEnd:r},e)},t.createBoard=function(e,n,r){for(var a=[],o=0,c=0;c<e.height;c++){for(var s=[],i=0;i<e.width;i++)s.push(t.renderSlot(o,r)),o++;a.push(Object(p.jsx)("div",{className:Ft.a.board_row,children:s},c))}var u=t.props.transitions&&t.props.transitions.board?t.props.transitions.board:0;return Object(p.jsx)("div",{style:{"--boardStartPos":"rotateZ(".concat(u,"deg)")},className:"\n              ".concat(0===u?"":"hasTransition ".concat(Ft.a.flip)," \n              ").concat(Ft.a.board," \n              ").concat(n?Ft.a.main_board:""," \n              ").concat(t.props.isSelected?Ft.a.selected:"","\n            "),onTransitionEnd:n&&r?function(){return t.handleTransitionEnd()}:void 0,children:a})},t.styleBoard=function(t,e){var n=Math.floor(.55*window.innerHeight/(e.height*t)),r=Math.floor(.55*window.innerHeight/(e.width*t));n=n<=r?n:r;var a=Math.round(e.height/130*10)/10;return a<=.5&&(a=0),{"--boardWidth":n*e.width+"px","--boardHeight":n*e.height+"px","--slotSize":n+1+"px","--fontSize":a+"em"}},t}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){var t=this.props.transitions;this.props.isMainBoard&&(t&&(t.slots||t.board)?Array.from(document.querySelectorAll(".hasTransition")).forEach((function(t){t.classList.remove(Ft.a.animate),setTimeout((function(){t.classList.add(Ft.a.animate)}),0)})):this.props.winIndexes.length&&Rt())}},{key:"render",value:function(){if(this.props.flip%2===0)var t=this.props.boardParams;else t={width:this.props.boardParams.height,height:this.props.boardParams.width};var e=this.props.isMainBoard,n=e?"":this.props.title,r=!(!e||!this.props.winIndexes.length);return Object(p.jsxs)("div",{style:e?this.styleBoard(1,t):this.styleBoard(4,t),className:e?Ft.a.main:"",children:[this.createBoard(t,e,r),Object(p.jsx)("p",{className:Ft.a.title,children:n})]})}}]),n}(a.a.Component),Et=function(t){Object(f.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).prepareInfos=function(e){e.preventDefault();var n=parseInt(t.width.value),r=parseInt(t.height.value),a=n<=r?n:r,o=Math.round(.8+1.7*Math.log((n+r)/2)),c={width:n,height:r,scoreTarget:a<=o?a:o};t.props.sendGameSettings(c),t.infosForm.reset()},t}return Object(d.a)(n,[{key:"render",value:function(){var t=this;return Object(p.jsxs)("form",{className:Ft.a.form,onSubmit:function(e){return t.prepareInfos(e)},ref:function(e){return t.infosForm=e},children:[Object(p.jsx)("input",{type:"text",pattern:"\\b([3-9]|[12][0-9]|3[0-2])\\b",maxLength:this.props.length,ref:function(e){return t.width=e}}),Object(p.jsx)("input",{type:"text",pattern:"\\b([3-9]|[12][0-9]|3[0-2])\\b",maxLength:this.props.length,ref:function(e){return t.height=e}}),Object(p.jsx)("button",{type:"submit",children:"Envoyer!"})]})}}]),n}(a.a.Component);function Dt(t){var e=Object(O.b)(),n=Object(O.c)(Ct),r=Object(O.c)(wt),a=n[r].slots,o=Object(O.c)(Tt),c=Object(O.c)(It),s=Object(O.c)(Xt),i=t.pseudo,u=Object(p.jsx)(Et,{sendGameSettings:function(t){return e((n=t,function(t){t(yt()),t(xt(n))}));var n}}),l=Object(p.jsx)("button",{onClick:function(){return e(function(t){return function(e,n){Object(ct.f)(Object(ct.c)(Object(ct.d)(Object(ct.b)(),"players")),{pseudo:t}).then((function(){e(ht());var t=setInterval((function(){Xt(n())?clearInterval(t):e(ht())}),4e3)})).catch((function(t){}))}}(i))},children:"Request game"}),d=function(t){return e(vt(t))},b=function(){return e(gt(!0))},f=function(){return e(qt(1))},h=function(){return e(qt(-1))},j=r%2===0?"X":"O";if(c.length>0){var v=c.find((function(t){return t.pseudo===i})),m=-1!==v,g=2===c.length&&!m,_=1===c.length&&m;if(console.log("myPlayer",v),console.log("player",j),(_||s)&&(window.onunload=function(t){e(yt(!0))},u=null),(g||m)&&(l=null),s)v.sign===j||(e((function(t,e){setInterval((function(){Xt(e())&&t(ft(Tt(e())))}),3500)})),d=function(){},b=function(){},f=function(){},h=function(){})}o&&(b=function(){},f=function(){},h=function(){});var x=Object(O.c)(Nt),N=n[r].boardFlip,w={width:x.width,height:x.height},S=Object(O.c)(At),k=[],A=x.scoreTarget;if(console.log("scoreTarget",A),r>=2*A-1){var I=N%2===0?w.width:w.height;k=function(t,e,n,r){var a=[],o=[],c=[];for(var s in e)e[s]!==t[s]&&c.push(parseInt(s));for(var i=c.length-1;i>=0;i--){var u=c[i];if(!o.includes(u)){for(var l=e[u],d=0,b=u;b>u-n&&e[b-1]&&e[b-1]===l&&b%r!==0;b--)d++,a.push(b-1);for(var f=0,h=u;h<u+n&&e[h+1]&&e[h+1]===l&&(h+1)%r!==0;h++)f++,a.push(h+1);d+f>=n-1&&(a.push(u),o=o.concat(a)),a=[];for(var j=0,p=u;p>u-n*r&&e[p-r]&&e[p-r]===l;p-=r)j++,a.push(p-r);for(var v=0,O=u;O<u+n*r&&e[O+r]&&e[O+r]===l;O+=r)v++,a.push(O+r);j+v>=n-1&&(a.push(u),o=o.concat(a)),a=[];for(var m=0,g=u;g>u-n*(r+1)&&e[g-r-1]&&e[g-r-1]===l&&g%r!==0;g-=r+1)m++,a.push(g-r-1);for(var _=0,x=u;x<u+n*(r+1)&&e[x+r+1]&&e[x+r+1]===l&&(x+1)%r!==0;x+=r+1)_++,a.push(x+r+1);m+_>=n-1&&(a.push(u),o=o.concat(a)),a=[];for(var y=0,C=u;C>u-n*(r-1)&&e[C-r+1]&&e[C-r+1]===l&&(C+1)%r!==0;C-=r-1)y++,a.push(C-r+1);for(var N=0,w=u;w<u+n*(r-1)&&e[w+r-1]&&e[w+r-1]===l&&w%r!==0;w+=r-1)N++,a.push(w+r-1);y+N>=n-1&&(a.push(u),o=o.concat(a)),a=[]}}return o}(n[r-1].slots,a,A,I)}var X,T=n.map((function(t,a){var o=a?"Move #"+a:"Game start",c=r===a,s=a&&a===n.length-1;return Object(p.jsx)("li",{children:Object(p.jsx)(Gt,{boardParams:w,isSelected:c,slots:n[a].slots,transitions:s?S:null,flip:n[a].boardFlip,onClick:function(){return e(function(t){return function(e,n){e(Ot(t)),kt(n())&&e(gt(!1))}}(a))},title:o})},a)})),q=Object(O.c)(St);if(T=q?T:T.sort((function(t,e){return e.key-t.key})),k.length){var M=0;k.forEach((function(t){"X"===a[t]&&M++})),X=M>k.length-M?"Winner: X":M<k.length-M?"Winner: O":"Draw!"}else X=k.length||r!==a.length?"Next player: "+j:"Draw!";return Object(p.jsxs)("div",{className:Ft.a.game,children:[u,Object(p.jsx)(Gt,{isMainBoard:!0,boardParams:w,slots:a,transitions:S,flip:N,winIndexes:k,onClick:function(t){return d(t)}}),Object(p.jsxs)("div",{className:Ft.a.game_info,children:[Object(p.jsx)("div",{className:Ft.a.status,children:X}),Object(p.jsxs)("div",{className:Ft.a.controls,children:[l,Object(p.jsx)("button",{onClick:function(){return f()},children:"Flip right"}),Object(p.jsx)("button",{onClick:function(){return h()},children:"Flip left"}),Object(p.jsx)(y,{isOn:!q,onClick:function(){return e(mt())}}),Object(p.jsx)(y,{isOn:!Object(O.c)(kt),onClick:function(){return b()}}),Object(p.jsx)(C,{title:"Reset",onClick:function(){return e(yt())}})]}),Object(p.jsx)("div",{className:Ft.a.scrollableY,children:Object(p.jsx)("ol",{className:Ft.a.moves,children:T})})]})]})}function Jt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(e){return setTimeout((function(){return e({data:t})}),500)}))}var Yt=Object(m.b)("counter/fetchCount",function(){var t=Object(A.a)(k.a.mark((function t(e){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jt(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Lt=Object(m.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(t){t.value+=1},decrement:function(t){t.value-=1},incrementByAmount:function(t,e){t.value+=e.payload}},extraReducers:function(t){t.addCase(Yt.pending,(function(t){t.status="loading"})).addCase(Yt.fulfilled,(function(t,e){t.status="idle",t.value+=e.payload}))}}),zt=Lt.actions,Ht=zt.increment,Wt=zt.decrement,Zt=zt.incrementByAmount,Kt=function(t){return t.counter.value},Qt=(Lt.reducer,n(26)),Vt=n.n(Qt);function Ut(){var t=Object(O.c)(Kt),e=Object(O.b)(),n=Object(r.useState)("2"),a=Object(w.a)(n,2),o=a[0],c=a[1],s=Number(o)||0;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:Vt.a.row,children:[Object(p.jsx)("button",{className:Vt.a.button,"aria-label":"Decrement value",onClick:function(){return e(Wt())},children:"-"}),Object(p.jsx)("span",{className:Vt.a.value,children:t}),Object(p.jsx)("button",{className:Vt.a.button,"aria-label":"Increment value",onClick:function(){return e(Ht())},children:"+"})]}),Object(p.jsxs)("div",{className:Vt.a.row,children:[Object(p.jsx)("input",{className:Vt.a.textbox,"aria-label":"Set increment amount",value:o,onChange:function(t){return c(t.target.value)}}),Object(p.jsx)("button",{className:Vt.a.button,onClick:function(){return e(Zt(s))},children:"Add Amount"}),Object(p.jsx)("button",{className:Vt.a.asyncButton,onClick:function(){return e(Yt(s))},children:"Add Async"}),Object(p.jsx)("button",{className:Vt.a.button,onClick:function(){return e((t=s,function(e,n){Kt(n())%2===1&&e(Zt(t))}));var t},children:"Add If Odd Tbd"})]})]})}n(59);var $t=function(t){Object(f.a)(n,t);var e=Object(h.a)(n);function n(){var t;return Object(l.a)(this,n),(t=e.call(this)).state={items:{Counter:J,TicTacToe:ot,ConnectX:Dt,Tbd:Ut},itemSelected:null,userPseudo:""},t.handleClick=t.handleClick.bind(Object(b.a)(t)),t}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=this.state.userPseudo;console.log("componentDidMount",t),t||(t=function(){try{var t=localStorage.getItem("state");if(console.log("serializedState",t),null===t)return;return console.log("serializedState",JSON.parse(t)),JSON.parse(t)}catch(e){return}}(),console.log("pseudo after loadState",t),t||(t=""),this.setState({userPseudo:t}),t||u.push("/redux-project/login"))}},{key:"handleClick",value:function(t){this.setState({itemSelected:t.target.name})}},{key:"render",value:function(){var t=this.state.userPseudo;console.log("render",t);var e=this.state.itemSelected?a.a.createElement(this.state.items[this.state.itemSelected],{pseudo:t}):null;return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(N,{items:this.state.items,handleClick:this.handleClick}),Object(p.jsx)("div",{className:"main",children:e})]})}}]),n}(r.Component),te=function(){return Object(p.jsx)("h2",{className:"notFound",children:"Nothing to see here"})},ee=n(18),ne=n(21),re=Object(ne.b)({nav:x,counter:G,tictactoe:tt,connectX:Mt}),ae=Object(m.d)({serializableCheck:!1}),oe=Object(m.a)({reducer:function(t,e){return"nav/reset"===e.type&&(t=void 0),re(t,e)},middleware:Object(ee.a)(ae)}),ce="/redux-project";c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(O.a,{store:oe,children:Object(p.jsx)(s.b,{history:u,children:Object(p.jsxs)(s.c,{children:[Object(p.jsx)(s.a,{exact:!0,path:"".concat(ce,"/login"),component:v}),Object(p.jsx)(s.a,{path:"".concat(ce),component:$t}),Object(p.jsx)(s.a,{component:te})]})})})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.45ec71ea.chunk.js.map