(this["webpackJsonpredux-app"]=this["webpackJsonpredux-app"]||[]).push([[0],{16:function(t,e,n){t.exports={board_row:"Tictactoe_board_row__3rgFx",status:"Tictactoe_status__1yWkH",square:"Tictactoe_square__2FLKp",selected:"Tictactoe_selected__2J0dk",win:"Tictactoe_win__3iu36","kbd-navigation":"Tictactoe_kbd-navigation__1k7WA",game:"Tictactoe_game__1L0bM",game_info:"Tictactoe_game_info__3MppA",board:"Tictactoe_board__EHRYs",game_board:"Tictactoe_game_board__10zJy",moves:"Tictactoe_moves__1SQaE",scrollableY:"Tictactoe_scrollableY__Q9GYP"}},25:function(t,e,n){t.exports={row:"Counter_row__25RA2",value:"Counter_value__1LyDH",button:"Counter_button__1Mrat",textbox:"Counter_textbox__3xGUA",asyncButton:"Counter_asyncButton__24jSS Counter_button__1Mrat"}},26:function(t,e,n){t.exports={row:"Counter_row__-ob4V",value:"Counter_value__1mJ_F",button:"Counter_button__2N3Ru",textbox:"Counter_textbox__3t7Hj",asyncButton:"Counter_asyncButton__3xT0m Counter_button__2N3Ru"}},51:function(t,e,n){},58:function(t,e,n){},60:function(t,e,n){"use strict";n.r(e);var r=n(4),c=n.n(r),a=n(35),o=n.n(a),s=(n(51),n(62)),i=n(23),u=Object(i.a)(),l=n(1),d=n(2),b=n(27),p=n(6),f=n(7),j=function(){try{var t=localStorage.getItem("state");if(null===t)return;return JSON.parse(t)}catch(e){return}},h=function(t){try{var e=JSON.stringify(t);localStorage.setItem("state",e)}catch(n){console.log(n)}},O=n(3),v=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(){var t;Object(l.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(t=e.call.apply(e,[this].concat(c))).goToApp=function(e){e.preventDefault(),console.log(Object(b.a)(t));var n=t.pseudoInput.value;h(n),u.push("/redux-project/")},t}return Object(d.a)(n,[{key:"render",value:function(){var t=this;return Object(O.jsx)("div",{className:"connexionBox",onSubmit:function(e){return t.goToApp(e)},children:Object(O.jsxs)("form",{className:"connexion",children:[Object(O.jsx)("input",{type:"text",placeholder:"Pseudo",required:!0,ref:function(e){t.pseudoInput=e}}),Object(O.jsx)("button",{type:"submit",children:"GO"})]})})}}]),n}(c.a.Component),m=n(10),g=n(14),x=Object(g.c)({name:"nav",initialState:{},reducers:{reset:function(t){}}}),y=x.actions.reset,_=x.reducer;function C(t){return Object(O.jsxs)("label",{className:"switch",children:[Object(O.jsx)("input",{type:"checkbox",checked:t.isOn,onClick:t.onClick,readOnly:!0}),Object(O.jsx)("span",{className:"slider"})]})}function S(t){return Object(O.jsx)("button",{className:"reset",onClick:t.onClick,children:t.title})}function N(t){var e=Object(m.b)(),n=Object.keys(t.items).map((function(e,n){return Object(O.jsx)("button",{name:e,onClick:function(e){return t.handleClick(e)},children:e},n)}));return Object(O.jsxs)("header",{className:"App-header",children:[Object(O.jsx)("div",{className:"nav-items",children:n}),Object(O.jsx)(S,{title:"Reset all",onClick:function(){return e(y())}})]})}var w=n(20),k=n(8),A=n.n(k),I=n(13);function X(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(e){return setTimeout((function(){return e({data:t})}),500)}))}var T=Object(g.b)("counter/fetchCount",function(){var t=Object(I.a)(A.a.mark((function t(e){var n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),F=Object(g.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(t){t.value+=1},decrement:function(t){t.value-=1},incrementByAmount:function(t,e){t.value+=e.payload},reset:function(t){t.value=0}},extraReducers:function(t){t.addCase(T.pending,(function(t){t.status="loading"})).addCase(T.fulfilled,(function(t,e){t.status="idle",t.value+=e.payload}))}}),q=F.actions,B=q.increment,P=q.decrement,M=q.incrementByAmount,G=q.reset,E=function(t){return t.counter.value},R=F.reducer,D=n(25),J=n.n(D);function L(){var t=Object(m.c)(E),e=Object(m.b)(),n=Object(r.useState)("2"),c=Object(w.a)(n,2),a=c[0],o=c[1],s=Number(a)||0;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:J.a.row,children:[Object(O.jsx)("button",{className:J.a.button,"aria-label":"Decrement value",onClick:function(){return e(P())},children:"-"}),Object(O.jsx)("span",{className:J.a.value,children:t}),Object(O.jsx)("button",{className:J.a.button,"aria-label":"Increment value",onClick:function(){return e(B())},children:"+"})]}),Object(O.jsxs)("div",{className:J.a.row,children:[Object(O.jsx)("input",{className:J.a.textbox,"aria-label":"Set increment amount",value:a,onChange:function(t){return o(t.target.value)}}),Object(O.jsx)("button",{className:J.a.button,onClick:function(){return e(M(s))},children:"Add Amount"}),Object(O.jsx)("button",{className:J.a.asyncButton,onClick:function(){return e(T(s))},children:"Add Async"}),Object(O.jsx)("button",{className:J.a.button,onClick:function(){return e((t=s,function(e,n){E(n())%2===1&&e(M(t))}));var t},children:"Add If Odd"}),Object(O.jsx)(S,{title:"Reset",onClick:function(){return e(G())}})]})]})}var Y={history:[{squares:Array(9).fill(null)}],winSquares:[],xIsNext:!0,stepNumber:0,sortIsAsc:!0},H=Object(g.c)({name:"tictactoe",initialState:Y,reducers:{handleClick:function(t,e){var n=t.history.slice(0,t.stepNumber+1),r=n[n.length-1].squares.slice();t.winSquares.length||r[e.payload]||(r[e.payload]=t.xIsNext?"X":"O",t.history=n.concat([{squares:r}]),t.stepNumber=n.length,t.xIsNext=!t.xIsNext)},jumpTo:function(t,e){t.stepNumber=e.payload,t.xIsNext=e.payload%2===0},toggleSort:function(t){t.sortIsAsc=!t.sortIsAsc},reset:function(t){t.history=[{squares:Array(9).fill(null)}],t.stepNumber=0}}}),z=H.actions,W=z.handleClick,Z=z.jumpTo,K=z.toggleSort,Q=z.reset,U=function(t){return t.tictactoe.history},V=function(t){return t.tictactoe.stepNumber},$=function(t){return t.tictactoe.xIsNext},tt=function(t){return t.tictactoe.sortIsAsc},et=H.reducer,nt=n(16),rt=n.n(nt);var ct=function(t){var e="";return t.winSquares&&(e=t.winSquares.find((function(e){return e===t.index}))+1?" "+rt.a.win:""),Object(O.jsx)("button",{className:rt.a.square+e,onClick:t.onClick,children:t.value})},at=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"renderSquare",value:function(t){var e=this;return Object(O.jsx)(ct,{index:t,value:this.props.squares[t],onClick:function(){return e.props.onClick(t)},winSquares:this.props.winSquares},t)}},{key:"createBoard",value:function(){for(var t=[],e=-1,n=0;n<3;n++){for(var r=[],c=0;c<3;c++)e++,r.push(this.renderSquare(e));t.push(Object(O.jsx)("div",{className:rt.a.board_row,children:r},n))}return t}},{key:"render",value:function(){var t="undefined"===typeof this.props.isSelected,e=t?" "+rt.a.game_board:"",n=this.props.isSelected?" "+rt.a.selected:"",r=t?"":this.props.title;return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:rt.a.board+e+n,children:this.createBoard()}),Object(O.jsx)("p",{children:r})]})}}]),n}(c.a.Component);function ot(){var t=Object(m.b)(),e=Object(m.c)(U),n=Object(m.c)(V),r=e[n],c=function(t){for(var e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],n=0;n<e.length;n++){var r=Object(w.a)(e[n],3),c=r[0],a=r[1],o=r[2];if(t[c]&&t[c]===t[a]&&t[c]===t[o])return e[n]}return[]}(r.squares),a=e.map((function(r,c){var a=c?"Move #"+c:"Game start",o=n===c;return Object(O.jsx)("li",{children:Object(O.jsx)(at,{isSelected:o,squares:e[c].squares,onClick:function(){return t(Z(c))},title:a})},c)}));a=Object(m.c)(tt)?a:a.sort((function(t,e){return e.key-t.key}));var o,s=Object(m.c)($);return o=c.length?"Winner: "+(s?"O":"X"):9!==n||c.length?"Next player: "+(s?"X":"O"):"Draw!",Object(O.jsxs)("div",{className:rt.a.game,children:[Object(O.jsx)(at,{squares:r.squares,winSquares:c,onClick:function(e){return t(W(e))}}),Object(O.jsxs)("div",{className:rt.a.game_info,children:[Object(O.jsx)("div",{children:o}),Object(O.jsx)(C,{onClick:function(){return t(K())}}),Object(O.jsx)(S,{title:"Reset",onClick:function(){return t(Q())}}),Object(O.jsx)("div",{className:rt.a.scrollableY,children:Object(O.jsx)("ol",{className:rt.a.moves,children:a})})]})]})}var st=n(5),it=n(44),ut=n(46),lt=Object(it.a)({apiKey:"AIzaSyDVe3axD8Y3GnxcnsnDuDz_FHCKYJcu6gg",authDomain:"redux-project-98a9a.firebaseapp.com",databaseURL:"https://redux-project-98a9a-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"redux-project-98a9a",storageBucket:"redux-project-98a9a.appspot.com",messagingSenderId:"67646127878",appId:"1:67646127878:web:507ecc4c86993503ca2887",measurementId:"G-34QJSE84ZR"});Object(ut.a)(lt);function dt(){var t=Object(st.b)();return new Promise((function(e){Object(st.a)(Object(st.d)(t,"/players")).then((function(t){t.exists()?e(t.val()):console.log("No data available")})).catch((function(t){console.error(t)}))}))}function bt(t){var e=Object(st.b)();return new Promise((function(n){Object(st.a)(Object(st.d)(e,"/turnAction")).then((function(r){r.exists()?Object(st.a)(Object(st.d)(e,"/stepNumber")).then((function(c){c.exists()?r.val()===t.turnAction&&c.val()===t.stepNumber||Object(st.a)(Object(st.d)(e,"/")).then((function(t){t.exists()?n(t.val()):console.log("No data available")})).catch((function(t){console.error(t)})):console.log("No data available")})).catch((function(t){console.error(t)})):console.log("No data available")})).catch((function(t){console.error(t)}))}))}function pt(){var t=Object(st.b)();return new Promise((function(e){Object(st.a)(Object(st.d)(t,"/players")).then((function(n){n.exists()?Object(st.a)(Object(st.d)(t,"/gameIsOn")).then((function(t){t.exists()?e({players:n.val(),gameIsOn:t.val()}):console.log("No data available")})).catch((function(t){console.error(t)})):console.log("No data available")})).catch((function(t){console.error(t)}))}))}var ft={history:[{slots:Array(42).fill(0),boardFlip:0}],turnAction:{number:0,action:0},stepNumber:0,gameSettings:{width:7,height:6,scoreTarget:4},currentSign:"X",sortIsAsc:!0,gravIsOn:!0,transitions:{slots:0,board:0},players:[]},jt=Object(g.b)("connectX/readPlayers",function(){var t=Object(I.a)(A.a.mark((function t(e,n){var r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dt();case 2:return(r=t.sent)||(r=[]),Object.keys(r).length>2&&(n.dispatch(kt()),n.dispatch(Et(j())),r=[]),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),ht=Object(g.b)("connectX/compareGameState",function(){var t=Object(I.a)(A.a.mark((function t(e){var n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Ot=Object(g.b)("connectX/readGamePlayers",function(){var t=Object(I.a)(A.a.mark((function t(e,n){var r,c,a;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pt();case 2:return r=t.sent,c=r.players,1===(a=Object.keys(c).length)?Object(st.e)(Object(st.d)(Object(st.b)(),"/gameIsOn/"),!1):2===a&&(r.gameIsOn?n.dispatch(wt(!1)):n.dispatch(wt(!0))),a>2&&(n.dispatch(kt()),n.dispatch(Et(j())),c=[]),t.abrupt("return",c);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),vt=Object(g.c)({name:"connectX",initialState:ft,reducers:{fillSlot:function(t,e){var n=e.payload,r=n.stepNumber,c=n.history,a=n.current,o=n.slots,s=n.slotIndex,i=t.currentSign;o[s]=i;var u=t.turnAction,l=!u.action;l&&r++,t.stepNumber=r;var d=u.number+1===2,b=!t.gravIsOn;if(d&&b?(t.turnAction={number:0,action:0},t.currentSign="X"===i?"O":"X"):(t.turnAction.number+=1,t.turnAction.action=1),c=c.slice(0,r),t.history=c.concat([{slots:o,boardFlip:a.boardFlip}]),t.players&&2===t.players.length){console.log("set db fillSlot");var p=Object(st.b)(),f=Object(st.d)(p,"/stepNumber/");l&&Object(st.e)(f,r),b&&(f=Object(st.d)(p,"/history/".concat(r)),Object(st.e)(f,{slots:o,boardFlip:a.boardFlip}),d&&(f=Object(st.d)(p,"/currentSign/"),Object(st.e)(f,t.currentSign)),f=Object(st.d)(p,"/turnAction/"),Object(st.e)(f,t.turnAction.number),f=Object(st.d)(p,"/transitions/"),Object(st.e)(f,{slots:0,board:0}))}},toggleGravity:function(t,e){var n,r=e.payload.slotIndex,c="undefined"!==typeof r,a=t.stepNumber,o=t.history.slice(0,a+1),s=o[a],i=s.slots.slice(),u=e.payload.toggle,l=t.turnAction;u?(t.gravIsOn=!t.gravIsOn,n=l.number+1===2):n=2===l.number;var d=t.gravIsOn;if(d){var b=t.gameSettings.width,p=t.gameSettings.height;s.boardFlip%2!==0&&(b=t.gameSettings.height,p=t.gameSettings.width);var f=1;if(c){for(var j=0,h=p-1;h>0;h--)if(r>=(h-1)*b&&r<=h*b-1){j=p-h;break}f=j}for(var O=Array(b*p).fill(0),v=i.length-1-f*b;v>=0;v-=b){for(var m=0;m<b;m++){var g=v-m;if(i[g]&&(!c||r===g)){for(var x=f;x>0;x--){var y=g+b*x;if(!i[y]){i[y]=i[g],i[g]=0,O[y]=x;break}}if(r===g)break}}if(c)break;f++}}var _=!l.action;_&&a++,t.stepNumber=a,n?(t.turnAction={number:0,action:0},t.currentSign="X"===t.currentSign?"O":"X"):(t.turnAction.number=u?l.number+1:l.number,t.turnAction.action=u?2:l.action),o=o.slice(0,a),t.history=o.concat([{slots:i,boardFlip:s.boardFlip}]);var C=!!(O&&O.filter((function(t){return 0!==t})).length>0);if(t.transitions={slots:d&&C?O:0,board:u||3!==l.action?0:t.transitions.board},t.players&&2===t.players.length){console.log("set db toggleGravity");var S=Object(st.b)(),N=Object(st.d)(S,"/gravIsOn/");u&&Object(st.e)(N,d),N=Object(st.d)(S,"/history/".concat(a)),Object(st.e)(N,{slots:i,boardFlip:s.boardFlip}),_&&(N=Object(st.d)(S,"/stepNumber/"),Object(st.e)(N,a)),n&&(N=Object(st.d)(S,"/currentSign/"),Object(st.e)(N,t.currentSign)),N=Object(st.d)(S,"/turnAction/"),Object(st.e)(N,t.turnAction.number),N=Object(st.d)(S,"/transitions/"),Object(st.e)(N,t.transitions)}},flipBoardState:function(t,e){var n=t.stepNumber,r=t.history.slice(0,n+1),c=r[n],a=c.slots.slice(),o=e.payload,s=c.boardFlip+o;-1===s&&(s=3),4===s&&(s=0);var i=t.gameSettings.width,u=t.gameSettings.height;c.boardFlip%2!==0&&(i=t.gameSettings.height,u=t.gameSettings.width);for(var l=a.slice(),d=u,b=a.length-1;b>=0;b-=i){for(var p=0;p<i;p++){var f=b-p;l[1===o?u*(f+1-(d-1)*i)-d:u*(d*i-1-f)+d-1]=a[f]}d--}var j=t.turnAction,h=!j.action;h&&n++,t.stepNumber=n;var O=j.number+1===2,v=!t.gravIsOn;if(O&&v?(t.turnAction={number:0,action:0},t.currentSign="X"===t.currentSign?"O":"X"):(t.turnAction.number+=1,t.turnAction.action=3),r=r.slice(0,n),t.history=r.concat([{slots:l,boardFlip:s}]),t.transitions={slots:0,board:-90*o},t.players&&2===t.players.length){console.log("set db flipBoard");var m=Object(st.b)(),g=Object(st.d)(m,"/stepNumber/");h&&Object(st.e)(g,n),v&&(g=Object(st.d)(m,"/history/".concat(n)),Object(st.e)(g,{slots:a,boardFlip:c.boardFlip}),O&&(g=Object(st.d)(m,"/currentSign/"),Object(st.e)(g,t.currentSign)),g=Object(st.d)(m,"/turnAction/"),Object(st.e)(g,t.turnAction.number),g=Object(st.d)(m,"/transitions/"),Object(st.e)(g,t.transitions))}},endTurn:function(t){var e={number:0,action:0};t.turnAction=e,t.currentSign="X"===t.currentSign?"O":"X";var n={slots:0,board:0};if(t.transitions=n,t.players&&2===t.players.length){console.log("set db endTurn");var r=Object(st.b)(),c=Object(st.d)(r,"/turnAction/");Object(st.e)(c,e.number),c=Object(st.d)(r,"/currentSign/"),Object(st.e)(c,t.currentSign),c=Object(st.d)(r,"/transitions/"),Object(st.e)(c,n)}},changeStep:function(t,e){t.stepNumber=e.payload,t.currentSign=t.stepNumber%2===0?"X":"O",t.turnAction={number:0,action:0},t.transitions={slots:0,board:0}},toggleSort:function(t){t.sortIsAsc=!t.sortIsAsc,t.transitions={slots:0,board:0}},setGameSettings:function(t,e){var n=e.payload;t.gameSettings=n,t.history=[{slots:Array(n.width*n.height).fill(0),boardFlip:0}]},reset:function(t,e){var n=e.payload,r=t.history.slice(0,1);r[0].boardFlip=0;var c={slots:0,board:0};if(n){var a=Object(st.b)(),o=Object(st.d)(a,"/stepNumber/");Object(st.e)(o,0),o=Object(st.d)(a,"/history/"),Object(st.e)(o,r),o=Object(st.d)(a,"/turnAction/"),Object(st.e)(o,0),o=Object(st.d)(a,"/currentSign/"),Object(st.e)(o,"X"),o=Object(st.d)(a,"/transitions/"),Object(st.e)(o,c),o=Object(st.d)(a,"/gravIsOn/"),Object(st.e)(o,!0),o=Object(st.d)(a,"/gameIsOn/"),Object(st.e)(o,!0)}t.stepNumber=0,t.history=r,t.currentSign="X",t.turnAction={number:0,action:0},t.transitions=c,t.gravIsOn=!0},removePlayers:function(t){var e=Object(st.b)();Object(st.e)(Object(st.d)(e,"/players/"),0)}},extraReducers:function(t){t.addCase(ht.pending,(function(t){console.log("updateStateAsync pending")})).addCase(ht.fulfilled,(function(t,e){var n=e.payload;if(console.log("updateStateAsync",n),0===n)window.alert("Your opponent left! Reload the page to exit the current game"),t.players=[];else{t.history=n.history,t.stepNumber=n.stepNumber;var r=n.transitions;t.transitions={slots:r.slots,board:r.board},t.gravIsOn=n.gravIsOn;var c=n.turnAction;t.turnAction.number=2===c?0:c,t.currentSign=n.currentSign}})).addCase(Ot.pending,(function(t){console.log("requestGameAsync pending")})).addCase(Ot.fulfilled,(function(t,e){var n=e.payload;console.log("requestGameAsync",n);var r=Object.keys(n);0===r.length||(1===r.length?(t.players=[{pseudo:n[r[0]].pseudo,sign:"O"}],t.transitions={slots:0,board:0}):2===r.length&&(t.players=[{pseudo:n[r[0]].pseudo,sign:"O"},{pseudo:n[r[1]].pseudo,sign:"X"}]))})).addCase(jt.pending,(function(t){console.log("initPlayersAsync pending")})).addCase(jt.fulfilled,(function(t,e){var n=e.payload;console.log("initPlayersAsync",n);var r=Object.keys(n);0===r.length?t.players=null:1===r.length?t.players=[{pseudo:n[r[0]].pseudo,sign:"O"}]:2===r.length&&(t.players=[{pseudo:n[r[0]].pseudo,sign:"O"},{pseudo:n[r[1]].pseudo,sign:"X"}])}))}}),mt=vt.actions,gt=mt.fillSlot,xt=mt.changeStep,yt=mt.toggleSort,_t=mt.toggleGravity,Ct=mt.flipBoardState,St=mt.endTurn,Nt=mt.setGameSettings,wt=mt.reset,kt=mt.removePlayers,At=function(t){return t.connectX.history},It=function(t){return t.connectX.gameSettings},Xt=function(t){return t.connectX.stepNumber},Tt=function(t){return t.connectX.sortIsAsc},Ft=function(t){return t.connectX.gravIsOn},qt=function(t){return t.connectX.transitions},Bt=function(t){return t.connectX.currentSign},Pt=function(t){return t.connectX.players},Mt=function(t){return t.connectX.turnAction},Gt=function(t){return function(e,n){e(Ct(t)),Ft(n())&&e(_t({toggle:!1}))}},Et=function(t){return function(e,n){Object(st.e)(Object(st.c)(Object(st.d)(Object(st.b)(),"players")),{pseudo:t}).then((function(){e(Ot());var t=setInterval((function(){Pt(n()).length<2?e(Ot()):clearInterval(t)}),4e3)})).catch((function(t){}))}},Rt=vt.reducer,Dt=n(9),Jt=n.n(Dt);var Lt=function(t){var e=t.slotScore,n="",r=0;e&&(n="hasTransition ".concat(Jt.a.fall),r=Math.round(10*(.16+.189*Math.log(e)))/10);var c=t.value?"".concat(Jt.a.slotContent," ").concat("X"===t.value?Jt.a.slotContentX:Jt.a.slotContentO):"",a=t.winStyle?"wonSlot":"";return Object(O.jsx)("button",{className:"".concat(Jt.a.slot," ").concat(a),onClick:t.onClick,children:Object(O.jsx)("div",{style:{"--slotStartPos":"calc(".concat(-1*e*125,"% + ").concat(e,"px)"),"--speed":"".concat(r,"s")},className:"".concat(c," ").concat(n),onTransitionEnd:t.handleTransitionEnd})})};function Yt(){var t=Array.from(document.querySelectorAll(".wonSlot"));console.log(t),t.forEach((function(t){t.classList.add(Jt.a.win)}))}var Ht=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(){var t;Object(l.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(t=e.call.apply(e,[this].concat(c))).handleTransitionEnd=function(e){t.props.winIndexes.length&&Yt()},t.renderSlot=function(e,n,r){var c,a=n?void 0:function(){return t.props.onClick(e)},o=n?t.props.winIndexes:null,s=!(!o||!o.includes(e)),i=0;if(r&&(i=r,s)){var u=t.props.transitions.slots,l=u.filter((function(t){return 0!==t})).sort((function(t,e){return e-t}))[0];e===u.findIndex((function(t){return t===l}))&&(c=function(e){return t.handleTransitionEnd(e)})}return Object(O.jsx)(Lt,{value:t.props.slots[e],onClick:a,slotScore:i,winStyle:s,handleTransitionEnd:c},e)},t.createBoard=function(e,n,r){for(var c=[],a=0,o=t.props.transitions,s=o?t.props.transitions.slots:null,i=0,u=0;u<e.height;u++){for(var l=[],d=0;d<e.width;d++)s&&(i=s[a]),l.push(t.renderSlot(a,r,i)),a++;c.push(Object(O.jsx)("div",{className:Jt.a.board_row,children:l},u))}var b=o?t.props.transitions.board:0;return Object(O.jsx)("div",{style:{"--boardStartPos":"rotateZ(".concat(b,"deg)")},className:"\n              ".concat(0===b?"":"hasTransition ".concat(Jt.a.flip)," \n              ").concat(Jt.a.board," \n              ").concat(n?Jt.a.main_board:""," \n              ").concat(t.props.isSelected?Jt.a.selected:"","\n            "),onTransitionEnd:n&&r?function(){return t.handleTransitionEnd()}:void 0,children:c})},t.styleBoard=function(t,e){var n=Math.floor(.55*window.innerHeight/(e.height*t)),r=Math.floor(.55*window.innerHeight/(e.width*t));n=n<=r?n:r;var c=Math.round(e.height/130*10)/10;return c<=.5&&(c=0),{"--boardWidth":n*e.width+"px","--boardHeight":n*e.height+"px","--slotSize":n+1+"px","--fontSize":c+"em"}},t}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){var t=this.props.transitions;this.props.isMainBoard&&(t&&(t.slots||t.board)?Array.from(document.querySelectorAll(".hasTransition")).forEach((function(t){t.classList.remove(Jt.a.animate),setTimeout((function(){t.classList.add(Jt.a.animate)}),0)})):this.props.winIndexes.length&&Yt())}},{key:"render",value:function(){var t=this.props.boardParams;this.props.flip%2!==0&&(t={width:t.height,height:t.width});var e=this.props.isMainBoard,n=e?"":this.props.title,r=!(!e||!this.props.winIndexes.length);return Object(O.jsxs)("div",{style:e?this.styleBoard(1,t):this.styleBoard(4,t),className:e?Jt.a.main:"",children:[this.createBoard(t,e,r),Object(O.jsx)("p",{className:Jt.a.title,children:n})]})}}]),n}(c.a.Component),zt=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(){var t;Object(l.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(t=e.call.apply(e,[this].concat(c))).prepareInfos=function(e){e.preventDefault();var n=parseInt(t.width.value),r=parseInt(t.height.value),c=n<=r?n:r,a=Math.round(.8+1.7*Math.log((n+r)/2)),o={width:n,height:r,scoreTarget:c<=a?c:a};t.props.sendGameSettings(o),t.infosForm.reset()},t}return Object(d.a)(n,[{key:"render",value:function(){var t=this;return Object(O.jsxs)("form",{className:Jt.a.form,onSubmit:function(e){return t.prepareInfos(e)},ref:function(e){return t.infosForm=e},children:[Object(O.jsx)("input",{type:"text",pattern:"\\b([3-9]|[12][0-9]|3[0-2])\\b",maxLength:this.props.length,ref:function(e){return t.width=e}}),Object(O.jsx)("input",{type:"text",pattern:"\\b([3-9]|[12][0-9]|3[0-2])\\b",maxLength:this.props.length,ref:function(e){return t.height=e}}),Object(O.jsx)("button",{type:"submit",children:"Envoyer!"})]})}}]),n}(c.a.Component);function Wt(t){var e=Object(m.b)(),n=Object(m.c)(At),r=Object(m.c)(Xt),c=n[r].slots,a=Object(m.c)(Mt),o=Object(m.c)(Pt),s=t.pseudo,i=Object(O.jsx)(zt,{sendGameSettings:function(t){return e((n=t,function(t){t(wt()),t(Nt(n))}));var n}}),u=Object(O.jsx)("button",{onClick:function(){return e(Et(s))},children:"Request game"}),l=null,d=Object(O.jsx)(S,{title:"Reset",onClick:function(){return e(wt())}}),b=Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{onClick:function(){return e(Gt(1))},children:"Flip right"}),Object(O.jsx)("button",{onClick:function(){return e(Gt(-1))},children:"Flip left"}),Object(O.jsx)(C,{isOn:!Object(m.c)(Ft),onClick:function(){return e(_t({toggle:!0}))}})]}),p=Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{className:Jt.a.disabled,onClick:function(){},children:"Flip right"}),Object(O.jsx)("button",{className:Jt.a.disabled,onClick:function(){},children:"Flip left"}),Object(O.jsx)(C,{className:Jt.a.disabled,isOn:!Object(m.c)(Ft),onClick:function(){}})]}),f=function(t){return e((n=t,function(t,e){var r=Xt(e()),c=At(e()).slice(0,r+1),a=c[r],o=a.slots.slice(),s=Ft(e());o[n]||(t(gt({stepNumber:r,history:c,current:a,slots:o,slotIndex:n,gravIsOn:s})),s&&t(_t({toggle:!1,slotIndex:n})))}));var n},j=Object(m.c)(Bt);if(console.log("currentSign",j),console.log("players",o),o&&o.length>0){var h=o.length;console.log("playerCount",h);var v=o.find((function(t){return t.pseudo===s})),g=void 0!==v;if(console.log("myplayer",v),g){var x=1===h,y=2===h;if((x||y)&&(console.log("waitingForGame",x),window.onunload=function(t){e(kt())},u=null),y){var _=v.sign,N=_===j;console.log(N),N||(e(function(t){return function(e,n){var r={turnAction:Mt(n()).number,stepNumber:Xt(n())},c=t===Bt(n()),a=setInterval((function(){c?clearInterval(a):e(ht(r))}),4e3)}}(_)),f=function(){},b=p),i=null,d=null}}else{(2===h||g)&&(u=null)}}else o&&0===o.length&&(console.log("am i crazy",o),e((function(t){t(jt())})));a.number&&(1===a.action?(f=function(){},l=Object(O.jsx)("button",{onClick:function(){return e(St())},children:"End turn"})):b=p);var w=Object(m.c)(It),k=n[r].boardFlip,A={width:w.width,height:w.height},I=Object(m.c)(qt),X=[],T=w.scoreTarget;if(r>=2*T-1){var F=k%2===0?A.width:A.height;X=function(t,e,n,r){var c=[],a=[],o=[];for(var s in e)e[s]!==t[s]&&o.push(parseInt(s));for(var i=o.length-1;i>=0;i--){var u=o[i];if(!a.includes(u)){for(var l=e[u],d=0,b=u;b>u-n&&e[b-1]&&e[b-1]===l&&b%r!==0;b--)d++,c.push(b-1);for(var p=0,f=u;f<u+n&&e[f+1]&&e[f+1]===l&&(f+1)%r!==0;f++)p++,c.push(f+1);d+p>=n-1&&(c.push(u),a=a.concat(c)),c=[];for(var j=0,h=u;h>u-n*r&&e[h-r]&&e[h-r]===l;h-=r)j++,c.push(h-r);for(var O=0,v=u;v<u+n*r&&e[v+r]&&e[v+r]===l;v+=r)O++,c.push(v+r);j+O>=n-1&&(c.push(u),a=a.concat(c)),c=[];for(var m=0,g=u;g>u-n*(r+1)&&e[g-r-1]&&e[g-r-1]===l&&g%r!==0;g-=r+1)m++,c.push(g-r-1);for(var x=0,y=u;y<u+n*(r+1)&&e[y+r+1]&&e[y+r+1]===l&&(y+1)%r!==0;y+=r+1)x++,c.push(y+r+1);m+x>=n-1&&(c.push(u),a=a.concat(c)),c=[];for(var _=0,C=u;C>u-n*(r-1)&&e[C-r+1]&&e[C-r+1]===l&&(C+1)%r!==0;C-=r-1)_++,c.push(C-r+1);for(var S=0,N=u;N<u+n*(r-1)&&e[N+r-1]&&e[N+r-1]===l&&N%r!==0;N+=r-1)S++,c.push(N+r-1);_+S>=n-1&&(c.push(u),a=a.concat(c)),c=[]}}return a}(n[r-1].slots,c,T,F)}var q,B=n.map((function(t,c){var a=c?"Move #"+c:"Game start",o=r===c,s=c===n.length-1;return Object(O.jsx)("li",{children:Object(O.jsx)(Ht,{boardParams:A,isSelected:o,slots:n[c].slots,transitions:s?I:null,flip:n[c].boardFlip,onClick:function(){return e(function(t){return function(e,n){Pt(n()).length<2&&(e(xt(t)),Ft(n())&&e(_t({toggle:!1})))}}(c))},title:a})},c)})),P=Object(m.c)(Tt);if(B=P?B:B.sort((function(t,e){return e.key-t.key})),X.length){var M=0;X.forEach((function(t){"X"===c[t]&&M++})),q=M>X.length-M?"Winner: X":M<X.length-M?"Winner: O":"Draw!"}else q=X.length||r!==c.length?"Next player: "+j:"Draw!";return Object(O.jsxs)("div",{className:Jt.a.game,children:[i,Object(O.jsx)(Ht,{isMainBoard:!0,boardParams:A,slots:c,transitions:I,flip:k,winIndexes:X,onClick:function(t){return f(t)}}),Object(O.jsxs)("div",{className:Jt.a.game_info,children:[Object(O.jsx)("div",{className:Jt.a.status,children:q}),Object(O.jsxs)("div",{className:Jt.a.controls,children:[u,b,Object(O.jsx)(C,{isOn:!P,onClick:function(){return e(yt())}}),l,d]}),Object(O.jsx)("div",{className:Jt.a.scrollableY,children:Object(O.jsx)("ol",{className:Jt.a.moves,children:B})})]})]})}function Zt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(e){return setTimeout((function(){return e({data:t})}),500)}))}var Kt=Object(g.b)("counter/fetchCount",function(){var t=Object(I.a)(A.a.mark((function t(e){var n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zt(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Qt=Object(g.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(t){t.value+=1},decrement:function(t){t.value-=1},incrementByAmount:function(t,e){t.value+=e.payload}},extraReducers:function(t){t.addCase(Kt.pending,(function(t){t.status="loading"})).addCase(Kt.fulfilled,(function(t,e){t.status="idle",t.value+=e.payload}))}}),Ut=Qt.actions,Vt=Ut.increment,$t=Ut.decrement,te=Ut.incrementByAmount,ee=function(t){return t.counter.value},ne=(Qt.reducer,n(26)),re=n.n(ne);function ce(){var t=Object(m.c)(ee),e=Object(m.b)(),n=Object(r.useState)("2"),c=Object(w.a)(n,2),a=c[0],o=c[1],s=Number(a)||0;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:re.a.row,children:[Object(O.jsx)("button",{className:re.a.button,"aria-label":"Decrement value",onClick:function(){return e($t())},children:"-"}),Object(O.jsx)("span",{className:re.a.value,children:t}),Object(O.jsx)("button",{className:re.a.button,"aria-label":"Increment value",onClick:function(){return e(Vt())},children:"+"})]}),Object(O.jsxs)("div",{className:re.a.row,children:[Object(O.jsx)("input",{className:re.a.textbox,"aria-label":"Set increment amount",value:a,onChange:function(t){return o(t.target.value)}}),Object(O.jsx)("button",{className:re.a.button,onClick:function(){return e(te(s))},children:"Add Amount"}),Object(O.jsx)("button",{className:re.a.asyncButton,onClick:function(){return e(Kt(s))},children:"Add Async"}),Object(O.jsx)("button",{className:re.a.button,onClick:function(){return e((t=s,function(e,n){ee(n())%2===1&&e(te(t))}));var t},children:"Add If Odd Tbd"})]})]})}n(58);var ae=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(){var t;return Object(l.a)(this,n),(t=e.call(this)).state={items:{Counter:L,TicTacToe:ot,ConnectX:Wt,Tbd:ce},itemSelected:null,userPseudo:""},t.handleClick=t.handleClick.bind(Object(b.a)(t)),t}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=this.state.userPseudo;console.log("componentDidMount",t),t||(t=j(),console.log("pseudo after loadState",t),t||(t=""),this.setState({userPseudo:t}),t||u.push("/redux-project/login"));var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}},{key:"handleClick",value:function(t){this.setState({itemSelected:t.target.name})}},{key:"render",value:function(){var t=this.state.userPseudo;console.log("render",t);var e=this.state.itemSelected?c.a.createElement(this.state.items[this.state.itemSelected],{pseudo:t}):null;return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(N,{items:this.state.items,handleClick:this.handleClick}),Object(O.jsx)("div",{className:"main",children:e})]})}}]),n}(r.Component),oe=function(){return Object(O.jsx)("h2",{className:"notFound",children:"Nothing to see here"})},se=n(18),ie=n(21),ue=Object(ie.b)({nav:_,counter:R,tictactoe:et,connectX:Rt}),le=Object(g.d)({serializableCheck:!1}),de=Object(g.a)({reducer:function(t,e){return"nav/reset"===e.type&&(t=void 0),ue(t,e)},middleware:Object(se.a)(le)}),be="/redux-project";o.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(m.a,{store:de,children:Object(O.jsx)(s.b,{history:u,children:Object(O.jsxs)(s.c,{children:[Object(O.jsx)(s.a,{exact:!0,path:"".concat(be,"/login"),component:v}),Object(O.jsx)(s.a,{path:"".concat(be),component:ae}),Object(O.jsx)(s.a,{path:"".concat(be,"/"),component:oe})]})})})}),document.getElementById("root"))},9:function(t,e,n){t.exports={game:"ConnectX_game__1x_fZ",form:"ConnectX_form__34LiB",main:"ConnectX_main__6vhcL",main_board:"ConnectX_main_board__1BL24",title:"ConnectX_title__2bStg",board:"ConnectX_board__3OnTo",board_row:"ConnectX_board_row__CsIJA",slot:"ConnectX_slot__25hJA",slotContent:"ConnectX_slotContent__GfqZP",slotContentX:"ConnectX_slotContentX__18XTw",slotContentO:"ConnectX_slotContentO__1evBh",win:"ConnectX_win__X-N9o",scaleAnim:"ConnectX_scaleAnim__3zEhe",game_info:"ConnectX_game_info__2JF9V",controls:"ConnectX_controls__ekhdW",status:"ConnectX_status__2MWFR",moves:"ConnectX_moves__1ki_t",selected:"ConnectX_selected__1Puyt","kbd-navigation":"ConnectX_kbd-navigation__35g11",scrollableY:"ConnectX_scrollableY__1Mm7t",flipR:"ConnectX_flipR__2HwCv",animate:"ConnectX_animate__3ZyN7",flip:"ConnectX_flip__2PQK3",fall:"ConnectX_fall__13rRa"}}},[[60,1,2]]]);
//# sourceMappingURL=main.457a5ed3.chunk.js.map