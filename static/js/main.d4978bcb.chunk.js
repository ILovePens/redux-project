(this["webpackJsonpredux-app"]=this["webpackJsonpredux-app"]||[]).push([[0],{16:function(t,e,n){t.exports={board_row:"Tictactoe_board_row__3rgFx",status:"Tictactoe_status__1yWkH",square:"Tictactoe_square__2FLKp",selected:"Tictactoe_selected__2J0dk",win:"Tictactoe_win__3iu36","kbd-navigation":"Tictactoe_kbd-navigation__1k7WA",game:"Tictactoe_game__1L0bM",game_info:"Tictactoe_game_info__3MppA",board:"Tictactoe_board__EHRYs",game_board:"Tictactoe_game_board__10zJy",moves:"Tictactoe_moves__1SQaE",scrollableY:"Tictactoe_scrollableY__Q9GYP"}},25:function(t,e,n){t.exports={row:"Counter_row__25RA2",value:"Counter_value__1LyDH",button:"Counter_button__1Mrat",textbox:"Counter_textbox__3xGUA",asyncButton:"Counter_asyncButton__24jSS Counter_button__1Mrat"}},26:function(t,e,n){t.exports={row:"Counter_row__-ob4V",value:"Counter_value__1mJ_F",button:"Counter_button__2N3Ru",textbox:"Counter_textbox__3t7Hj",asyncButton:"Counter_asyncButton__3xT0m Counter_button__2N3Ru"}},51:function(t,e,n){},58:function(t,e,n){},60:function(t,e,n){"use strict";n.r(e);var r=n(4),a=n.n(r),o=n(35),c=n.n(o),s=(n(51),n(62)),i=n(23),l=Object(i.a)(),u=n(1),d=n(2),b=n(27),p=n(5),f=n(6),h=function(t){try{var e=sessionStorage.getItem(t);if(null===e)return;return JSON.parse(e)}catch(n){return}},m=function(t,e){try{var n=JSON.stringify(t);sessionStorage.setItem(e,n)}catch(r){console.log(r)}},g=n(3),j=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).goToApp=function(e){e.preventDefault(),console.log(Object(b.a)(t));var n=t.pseudoInput.value;m({pseudo:n,stamp:(+new Date).toString(36)},"playerInfos"),l.push("/redux-project/")},t}return Object(d.a)(n,[{key:"render",value:function(){var t=this;return Object(g.jsxs)("div",{className:"connexionBox",children:[Object(g.jsx)("header",{className:"App-header",children:Object(g.jsx)("h1",{className:"logo",children:"Redux-progress"})}),Object(g.jsxs)("form",{className:"form connexion",onSubmit:function(e){return t.goToApp(e)},children:[Object(g.jsx)("input",{type:"text",placeholder:"Pseudo",required:!0,ref:function(e){t.pseudoInput=e}}),Object(g.jsx)("button",{type:"submit"})]})]})}}]),n}(a.a.Component),v=n(15),O=Object(v.c)({name:"nav",initialState:{},reducers:{reset:function(t){}}}),y=(O.actions.reset,O.reducer);function _(t){return Object(g.jsxs)("label",{className:"switch",children:[Object(g.jsx)("input",{type:"checkbox",checked:t.isOn,onClick:t.onClick,readOnly:!0}),Object(g.jsx)("span",{className:"slider"})]})}function x(t){return Object(g.jsx)("button",{className:"reset",onClick:t.onClick,children:t.title})}function S(t){var e=Object.keys(t.items).map((function(e,n){return Object(g.jsx)("button",{name:e,onClick:function(e){return t.handleClick(e)},children:"ConnectX"===e?"Jouer \xe0 ".concat(e):e},n)}));return Object(g.jsxs)("header",{className:"App-header",children:[Object(g.jsx)("h1",{className:"logo",children:"Redux-progress"}),Object(g.jsx)("div",{className:"nav-items",children:e})]})}var C=n(20),N=n(10),w=n(9),A=n.n(w),X=n(13);function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(e){return setTimeout((function(){return e({data:t})}),500)}))}var I=Object(v.b)("counter/fetchCount",function(){var t=Object(X.a)(A.a.mark((function t(e){var n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),T=Object(v.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(t){t.value+=1},decrement:function(t){t.value-=1},incrementByAmount:function(t,e){t.value+=e.payload},reset:function(t){t.value=0}},extraReducers:function(t){t.addCase(I.pending,(function(t){t.status="loading"})).addCase(I.fulfilled,(function(t,e){t.status="idle",t.value+=e.payload}))}}),F=T.actions,P=(F.increment,F.decrement,F.incrementByAmount,F.reset,T.reducer);n(25);var B={history:[{squares:Array(9).fill(null)}],winSquares:[],xIsNext:!0,stepNumber:0,sortIsAsc:!0},E=Object(v.c)({name:"tictactoe",initialState:B,reducers:{handleClick:function(t,e){var n=t.history.slice(0,t.stepNumber+1),r=n[n.length-1].squares.slice();t.winSquares.length||r[e.payload]||(r[e.payload]=t.xIsNext?"X":"O",t.history=n.concat([{squares:r}]),t.stepNumber=n.length,t.xIsNext=!t.xIsNext)},jumpTo:function(t,e){t.stepNumber=e.payload,t.xIsNext=e.payload%2===0},toggleSort:function(t){t.sortIsAsc=!t.sortIsAsc},reset:function(t){t.history=[{squares:Array(9).fill(null)}],t.stepNumber=0}}}),q=E.actions,M=(q.handleClick,q.jumpTo,q.toggleSort,q.reset,E.reducer),R=n(16),G=n.n(R);var H=function(t){var e="";return t.winSquares&&(e=t.winSquares.find((function(e){return e===t.index}))+1?" "+G.a.win:""),Object(g.jsx)("button",{className:G.a.square+e,onClick:t.onClick,children:t.value})};a.a.Component;var D=n(7),J=n(44),L=n(46),z=Object(J.a)({apiKey:"AIzaSyBcbjihs9sz2r212hEj8Dh1IjeDKfRqy7U",authDomain:"redux-progress.firebaseapp.com",databaseURL:"https://redux-progress-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"redux-progress",storageBucket:"redux-progress.appspot.com",messagingSenderId:"1056425097273",appId:"1:1056425097273:web:26f5d8fe70bfe09b8cf5e8"});Object(L.a)(z);function Y(t){var e=Object(D.b)();return new Promise((function(n){Object(D.a)(Object(D.d)(e,"/turnAction")).then((function(r){r.exists()?Object(D.a)(Object(D.d)(e,"/stepNumber")).then((function(a){a.exists()?r.val()!==t.turnAction||a.val()!==t.stepNumber?Object(D.a)(Object(D.d)(e,"/")).then((function(t){t.exists()?n(t.val()):console.log("No data available")})).catch((function(t){console.error(t)})):Object(D.a)(Object(D.d)(e,"/players")).then((function(t){t.exists()&&0===t.val()&&n(0)})).catch((function(t){console.error(t)})):console.log("No data available")})).catch((function(t){console.error(t)})):console.log("No data available")})).catch((function(t){console.error(t)}))}))}function W(t){var e=Object(D.b)();return new Promise((function(n){Object(D.a)(Object(D.d)(e,"/players")).then((function(r){r.exists()?t?n({players:r.val()}):Object(D.a)(Object(D.d)(e,"/gameSettings")).then((function(t){t.exists()?Object(D.a)(Object(D.d)(e,"/gameIsOn")).then((function(e){e.exists()?n({players:r.val(),gameSettings:t.val(),gameIsOn:e.val()}):console.log("No data available")})).catch((function(t){console.error(t)})):console.log("No data available")})).catch((function(t){console.error(t)})):console.log("No data available")})).catch((function(t){console.error(t)}))}))}var K={history:[{slots:Array(42).fill(0),boardFlip:0}],turnAction:{number:0,type:0},stepNumber:0,gameSettings:{width:7,height:6,scoreTarget:4},asyncStatus:"",currentSign:"X",players:null,sortIsAsc:!0,gravityState:!0,transitions:{slots:0,board:0,status:0},animations:0},Q=Object(v.b)("connectX/compareGameState",function(){var t=Object(X.a)(A.a.mark((function t(e){var n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),U=Object(v.b)("connectX/readGameState",function(){var t=Object(X.a)(A.a.mark((function t(e,n){var r,a,o;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(e);case 2:if(r=t.sent,a=r.players,!e){t.next=12;break}if(!ht(n.getState())){t.next=9;break}return t.abrupt("return");case 9:a||(a=[]);case 10:t.next=15;break;case 12:1===(o=Object.keys(a).length)?(Object(D.e)(Object(D.d)(Object(D.b)(),"/gameSettings/"),ut(n.getState())),Object(D.e)(Object(D.d)(Object(D.b)(),"/gameIsOn/"),!1)):2===o&&(r.gameIsOn?n.dispatch(Ot(r.gameSettings)):n.dispatch(st(!0))),o>2&&(n.dispatch(it()),n.dispatch(yt(h())),a=[]);case 15:return t.abrupt("return",a);case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),Z=Object(v.c)({name:"connectX",initialState:K,reducers:{fillSlot:function(t,e){var n=e.payload,r=n.stepNumber,a=n.history,o=n.current,c=n.slots,s=n.slotIndex,i=t.currentSign;c[s]=i;var l=t.turnAction;!l.type&&r++,t.stepNumber=r;var u=l.number+1===2;if(!t.gravityState){var d=t.gameSettings.width,b=t.gameSettings.height;if(o.boardFlip%2===0?0===c[s+d]:0===c[s+b]){var p=t.animations?t.animations.slice():Array(d*b).fill(0);p[s]="floating",t.animations=p}t.transitions={slots:0,board:0},u?(t.turnAction={number:0,type:0},t.currentSign="X"===i?"O":"X"):(t.turnAction.number+=1,t.turnAction.type=1)}else t.turnAction.number+=1,t.turnAction.type=1;a=a.slice(0,r),t.history=a.concat([{slots:c,boardFlip:o.boardFlip}]);var f=t.players;f&&2===f.length&&(t.turnAction.action=!0)},gravity:function(t,e){var n,r=e.payload.slotIndex,a="undefined"!==typeof r,o=t.stepNumber,c=t.history.slice(0,o+1),s=c[o],i=s.slots.slice(),l=e.payload.toggle,u=t.gravityState,d=t.turnAction;if(console.log("isAction",l),l){console.log("gravityState",u),u=!u;var b=t.players;b&&2===b.length&&(t.turnAction.action=!0),n=d.number+1===2}else n=2===d.number;var p=e.payload.noEdit;if(u||p){t.animations=0;var f=t.gameSettings.width,h=t.gameSettings.height;s.boardFlip%2!==0&&(f=t.gameSettings.height,h=t.gameSettings.width);var m=1;if(a){for(var g=0,j=h-1;j>0;j--)if(r>=(j-1)*f&&r<=j*f-1){g=h-j;break}m=g}for(var v=Array(f*h).fill(0),O=v.slice(),y=i.length-1-m*f;y>=0;y-=f){for(var _=0;_<f;_++){var x=y-_;if(i[x]&&(!a||r===x)){for(var S=m;S>0;S--){var C=x+f*S;if(!i[C]){p?O[x]="floating":(i[C]=i[x],i[x]=0,v[C]=S);break}}if(r===x)break}}if(a)break;m++}}var N=!d.type;if(p)t.animations=O;else{N&&o++,t.stepNumber=o,n?(t.turnAction={number:0,type:0},t.currentSign="X"===t.currentSign?"O":"X"):(t.turnAction.number=l?d.number+1:d.number,t.turnAction.type=l?2:d.type),c=c.slice(0,o),t.history=c.concat([{slots:i,boardFlip:s.boardFlip}]),t.gravityState=u;var w=!!(v&&v.filter((function(t){return 0!==t})).length>0);t.transitions={slots:u&&w?v:0,board:l||3!==d.type?0:t.transitions.board}}},flipBoardState:function(t,e){var n=t.stepNumber,r=t.history.slice(0,n+1),a=r[n],o=a.slots.slice(),c=e.payload,s=a.boardFlip+c;-1===s&&(s=3),4===s&&(s=0);var i=t.gameSettings.width,l=t.gameSettings.height;a.boardFlip%2!==0&&(i=t.gameSettings.height,l=t.gameSettings.width);for(var u=o.slice(),d=l,b=o.length-1;b>=0;b-=i){for(var p=0;p<i;p++){var f=b-p;u[1===c?l*(f+1-(d-1)*i)-d:l*(d*i-1-f)+d-1]=o[f]}d--}var h=t.turnAction;!h.type&&n++,t.stepNumber=n;var m=h.number+1===2,g=!t.gravityState;m&&g?(t.turnAction={number:0,type:0},t.currentSign="X"===t.currentSign?"O":"X"):(t.turnAction.number+=1,t.turnAction.type=3),r=r.slice(0,n),t.history=r.concat([{slots:u,boardFlip:s}]),t.transitions={slots:0,board:-90*c};var j=t.players;j&&2===j.length&&(t.turnAction.action=!0)},endTurn:function(t){t.turnAction={number:0,type:0,action:!0},t.currentSign="X"===t.currentSign?"O":"X",t.transitions={slots:0,board:0,status:1}},changeStep:function(t,e){t.stepNumber=e.payload,t.currentSign=t.stepNumber%2===0?"X":"O",t.turnAction={number:0,type:0},t.transitions={slots:0,board:0}},toggleSort:function(t){t.sortIsAsc=!t.sortIsAsc,t.transitions={slots:0,board:0}},setGameSettings:function(t,e){var n=e.payload;t.gameSettings=n,t.history=[{slots:Array(n.width*n.height).fill(0),boardFlip:0}]},setAsyncStatus:function(t,e){t.asyncStatus=e.payload},reset:function(t,e){var n=e.payload,r=t.history.slice(0,1);r[0].boardFlip=0;var a={slots:0,board:0};if(n){var o=Object(D.b)(),c=Object(D.d)(o,"/stepNumber/");Object(D.e)(c,0),c=Object(D.d)(o,"/gameSettings/"),Object(D.e)(c,t.gameSettings),c=Object(D.d)(o,"/history/"),Object(D.e)(c,r),c=Object(D.d)(o,"/turnAction/"),Object(D.e)(c,0),c=Object(D.d)(o,"/currentSign/"),Object(D.e)(c,"X"),c=Object(D.d)(o,"/transitions/"),Object(D.e)(c,a),c=Object(D.d)(o,"/gravityState/"),Object(D.e)(c,!0),c=Object(D.d)(o,"/gameIsOn/"),Object(D.e)(c,!0)}t.stepNumber=0,t.history=r,t.currentSign="X",t.turnAction={number:0,type:0},t.transitions=a,t.gravityState=!0},removePlayers:function(t){var e=Object(D.b)();Object(D.e)(Object(D.d)(e,"/players/"),0)}},extraReducers:function(t){t.addCase(Q.pending,(function(t){console.log("updateStateAsync pending")})).addCase(Q.fulfilled,(function(t,e){var n=e.payload;if(console.log("updateStateAsync",n),0===n)window.alert("Your opponent left! Reload the page to exit the current game"),t.players=null,t.asyncStatus="";else{t.history=n.history,t.stepNumber=n.stepNumber;var r=n.transitions;t.transitions={slots:r.slots,board:r.board},t.gravityState=n.gravityState;var a=n.turnAction;t.turnAction.number=2===a?0:a,t.asyncStatus=t.currentSign===n.currentSign?"watching":"",t.currentSign=n.currentSign}})).addCase(U.pending,(function(t){console.log("setGameStateAsync pending")})).addCase(U.fulfilled,(function(t,e){var n=e.payload;if(console.log("setGameStateAsync",n),n){var r=Object.keys(n),a=r.length;if(console.log("playersCount",a),a&&t.players||(console.log("setGameStateAsync []"),t.players=[]),a){var o=t.players,c=o.length;if(console.log("statePlayersCount",c),!c||2===a){var s=["O","X"];for(var i in 1===c&&(o=[]),r)o=o.concat({player:n[r[i]],sign:s[i]}),console.log("statePlayers",o),t.players=o;t.transitions={slots:0,board:0}}}}}))}}),V=Z.actions,$=V.fillSlot,tt=V.changeStep,et=V.toggleSort,nt=V.gravity,rt=V.flipBoardState,at=V.endTurn,ot=V.setAsyncStatus,ct=V.setGameSettings,st=V.reset,it=V.removePlayers,lt=function(t){return t.connectX.history},ut=function(t){return t.connectX.gameSettings},dt=function(t){return t.connectX.stepNumber},bt=function(t){return t.connectX.sortIsAsc},pt=function(t){return t.connectX.gravityState},ft=function(t){return t.connectX.currentSign},ht=function(t){return t.connectX.players},mt=function(t){return t.connectX.turnAction},gt=function(t){return t.connectX.transitions},jt=function(t){return t.connectX.animations},vt=function(t){return function(e,n){e(rt(t)),e(nt({toggle:!1,noEdit:!pt(n())}))}},Ot=function(t){return function(e){e(st()),e(ct(t))}},yt=function(t){return function(e,n){console.log(t),Object(D.e)(Object(D.c)(Object(D.d)(Object(D.b)(),"players")),{pseudo:t.pseudo,stamp:t.stamp}).then((function(){ht(n()).length||e(U(!1));var t=setInterval((function(){ht(n()).length<2?e(U(!1)):clearInterval(t)}),4e3)})).catch((function(t){}))}},_t=Z.reducer,xt=n(8),St=n.n(xt);var Ct=function(t){var e=t.slotScore,n="",r=0;e&&(n="hasTransition ".concat(St.a.fall),r=Math.round(10*(.16+.189*Math.log(e)))/10);var a=t.value?"".concat(St.a.slotFilled," ").concat("X"===t.value?St.a.slotFilledX:St.a.slotFilledO):"",o=t.animation?t.animation:"";o=St.a[o];var c=t.winStyle?"wonSlot":"";return Object(g.jsx)("button",{className:"".concat(St.a.slot," ").concat(a," ").concat(c),onClick:t.onClick,children:Object(g.jsx)("div",{style:{"--slotStartPos":"calc(".concat(-1*e*125,"% + ").concat(e,"px)"),"--speed":"".concat(r,"s")},className:"".concat(n," ").concat(o),onTransitionEnd:t.handleTransitionEnd})})};function Nt(){var t=Array.from(document.querySelectorAll(".wonSlot"));console.log(t),t.forEach((function(t){t.classList.remove("wonSlot"),t.classList.add(St.a.win)}))}var wt=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).handleTransitionEnd=function(e){t.props.winIndexes.length&&(console.log("hey style win transitionend"),Nt())},t.renderSlot=function(e,n,r,a){var o,c=n?void 0:function(){return t.props.onClick(e)},s=n?t.props.winIndexes:null,i=!(!s||!s.includes(e)),l=0;if(r&&(l=r,i)){var u=t.props.transitions.slots,d=u.filter((function(t){return 0!==t})).sort((function(t,e){return e-t}))[0];e===u.findIndex((function(t){return t===d}))&&(o=function(e){return t.handleTransitionEnd(e)})}return Object(g.jsx)(Ct,{value:t.props.slots[e],onClick:c,slotScore:l,winStyle:i,animation:a,handleTransitionEnd:o},e)},t.createBoard=function(e,n,r){for(var a=[],o=0,c=t.props.transitions,s=c?t.props.transitions.slots:null,i=t.props.animations?t.props.animations:null,l=0,u=0,d=0;d<e.height;d++){for(var b=[],p=0;p<e.width;p++)s&&(l=s[o]),i&&(u=i[o]),b.push(t.renderSlot(o,r,l,u)),o++;a.push(Object(g.jsx)("div",{className:St.a.board_row,children:b},d))}var f=c?t.props.transitions.board:0;return Object(g.jsx)("div",{style:{"--boardStartPos":"rotateZ(".concat(f,"deg)")},className:"\n\n              ".concat(0===f?"":"hasTransition ".concat(St.a.flip)," \n              ").concat(St.a.board," \n              ").concat(n?St.a.main_board:""," \n              ").concat(t.props.isSelected?St.a.selected:"","\n            "),onTransitionEnd:n&&r?function(){return t.handleTransitionEnd()}:void 0,children:a})},t.styleBoard=function(t,e){var n=e.height,r=e.width,a=Math.floor(.55*window.innerHeight/(n*t)),o=Math.floor(.55*window.innerHeight/(r*t));a=a<=o?a:o;var c=Math.round(n/130*10)/10;return c<=.5&&(c=0),{"--boardWidth":a*r+"px","--boardHeight":a*n+"px","--slotSize":a+1+"px","--fontSize":c+"em"}},t}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){var t=this.props.transitions;this.props.isMainBoard&&(Array.from(document.querySelectorAll(".hasTransition")).forEach((function(t){t.classList.remove("hasTransition"),t.classList.remove(St.a.transition),setTimeout((function(){t.classList.add(St.a.transition)}),0)})),t&&(t.slots||t.board)||this.props.winIndexes.length&&(console.log("hey style win update"),Nt()))}},{key:"render",value:function(){var t=this.props.boardParams;this.props.flip%2!==0&&(t={width:t.height,height:t.width});var e=this.props.isMainBoard,n=this.props.title,r=4,a=St.a.moves_board,o="",c=!1,s=null;if(e){n="",r=1,a=St.a.main,this.props.statusClass.disabled&&(o=St.a.disabledBoard);var i=this.props.statusClass;s=Object(g.jsxs)("div",{className:St.a.statusHandler,children:[Object(g.jsx)("button",{className:"".concat(i.current)}),Object(g.jsx)("button",{onClick:this.props.endTurnFunc,className:"".concat(i.previous)})]}),this.props.winIndexes.length&&(c=!0)}return Object(g.jsxs)("div",{style:this.styleBoard(r,t),className:"".concat(a," ").concat(o),children:[s,this.createBoard(t,e,c),Object(g.jsx)("p",{className:St.a.title,children:n})]})}}]),n}(a.a.Component),At=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).prepareInfos=function(e){e.preventDefault();var n=parseInt(t.width.value),r=parseInt(t.height.value),a=n<=r?n:r,o=Math.round(.8+1.7*Math.log((n+r)/2)),c={width:n,height:r,scoreTarget:a<=o?a:o};t.props.sendGameSettings(c),t.infosForm.reset()},t}return Object(d.a)(n,[{key:"render",value:function(){var t=this;return Object(g.jsxs)("form",{className:"form",onSubmit:function(e){return t.prepareInfos(e)},ref:function(e){return t.infosForm=e},children:[Object(g.jsx)("span",{children:"Personnalisez la taille du plateau (entre 3 et 32) :"}),Object(g.jsx)("input",{type:"text",pattern:"\\b([3-9]|[12][0-9]|3[0-2])\\b",maxLength:this.props.length,ref:function(e){return t.width=e},placeholder:"largeur",required:!0}),Object(g.jsx)("input",{type:"text",pattern:"\\b([3-9]|[12][0-9]|3[0-2])\\b",maxLength:this.props.length,ref:function(e){return t.height=e},placeholder:"hauteur",required:!0}),Object(g.jsx)("button",{type:"submit"})]})}}]),n}(a.a.Component);function Xt(t){var e,n=Object(N.b)(),r=Object(N.c)(lt),a=Object(N.c)(dt),o=Object(N.c)(ut),c=Object(N.c)(mt),s=Object(N.c)(ht),i=Object(N.c)(ft),l=Object(N.c)(pt),u=Object(N.c)(gt),d=Object(N.c)(jt),b=Object(N.c)(bt),p=r[a].slots,f=t.playerInfos,h=f.pseudo,m=Object(g.jsx)(At,{sendGameSettings:function(t){return n(Ot(t))}}),j=Object(g.jsx)("button",{onClick:function(){return n(yt(f))},children:"Request game"}),v=null,O=Object(g.jsx)(x,{title:"Reset",onClick:function(){return n(st())}}),y=Object(g.jsxs)("span",{children:[Object(g.jsx)("button",{onClick:function(){return n(vt(1))},children:"Flip right"}),Object(g.jsx)("button",{onClick:function(){return n(vt(-1))},children:"Flip left"}),Object(g.jsx)(_,{isOn:!l,onClick:function(){return n(nt({toggle:!0}))}})]}),S=Object(g.jsxs)("span",{children:[Object(g.jsx)("button",{className:St.a.disabled,onClick:function(){},children:"Flip right"}),Object(g.jsx)("button",{className:St.a.disabled,onClick:function(){},children:"Flip left"}),Object(g.jsx)(_,{className:St.a.disabled,isOn:!l,onClick:function(){}})]}),C=function(t){return n((e=t,function(t,n){var r=dt(n()),a=lt(n()).slice(0,r+1),o=a[r],c=o.slots.slice(),s=pt(n());c[e]||(t($({stepNumber:r,history:a,current:o,slots:c,slotIndex:e,gravityState:s})),s&&t(nt({toggle:!1,slotIndex:e})))}));var e};console.log("players",s);var w,A,X=f.stamp;if(s&&s.length>0){var k=s.length;console.log("playerCount",k);var I=s.find((function(t){return t.player.pseudo===h&&t.player.stamp===X})),T=void 0!==I;if(console.log("myplayer",I),T){var F=1===k,P=2===k;if((F||P)&&(console.log("waitingForGame",F),window.onunload=function(t){n(it())}),P){var B=I.sign,E=B===i;console.log(E),c.action&&function(t){var e=Object(D.b)(),n=Object(D.d)(e,"/history/".concat(t.stepNumber));Object(D.e)(n,t.history),n=Object(D.d)(e,"/stepNumber/"),Object(D.e)(n,t.stepNumber),n=Object(D.d)(e,"/turnAction/"),Object(D.e)(n,t.turnAction.number),n=Object(D.d)(e,"/currentSign/"),Object(D.e)(n,t.currentSign),n=Object(D.d)(e,"/gravity/"),Object(D.e)(n,t.gravityState),n=Object(D.d)(e,"/transitions/"),Object(D.e)(n,t.transitions),n=Object(D.d)(e,"/animations/"),Object(D.e)(n,t.animations)}({history:r,stepNumber:a,turnAction:c,currentSign:i,gravityState:l,transitions:u,animations:d}),E||(n(function(t){return function(e,n){if("watching"!==n().connectX.asyncStatus)var r=setInterval((function(){var a={turnAction:mt(n()).number,stepNumber:dt(n())};t===ft(n())||2!==ht(n()).length?clearInterval(r):e(Q(a))}),4e3);e(ot("watching"))}}(B)),C=function(){},y=S),m=null,O=null}j=null}else{2===k&&(j=null),1===k&&(j=Object(g.jsx)("button",{className:St.a.highlighted,onClick:function(){return n(yt(f))},children:"Join game"}))}}else s||(console.log("am i crazy",s),n((function(t){t(U(!0))})));if(console.log("currentSign",i),"X"===i?(w=St.a.redPlayerTurn,A=St.a.bluePlayerTurn):(w=St.a.bluePlayerTurn,A=St.a.redPlayerTurn),c.number){var q=c.type;console.log("previousAction",q),1===q?(C=function(){},v=Object(g.jsx)("button",{onClick:function(){return n(at())},children:"End turn"}),e=function(){return n(at())},w={current:"".concat(w),previous:"".concat(St.a.canEndTurn," ").concat(St.a.fadeInOnHover," hasTransition"),disabled:!0}):(w={current:"".concat(w),previous:""},y=S)}else console.log(u),w={current:w,previous:r.length>1?"".concat(u.status?"".concat(St.a.endTurn," ").concat(A):A," ").concat(St.a.fadeout," hasTransition"):""};var M=r[a].boardFlip,R={width:o.width,height:o.height},G=[],H=o.scoreTarget;if(a>=2*H-1){var J=M%2===0?R.width:R.height;G=function(t,e,n,r){var a=[],o=[],c=[];for(var s in e)e[s]!==t[s]&&c.push(parseInt(s));for(var i=c.length-1;i>=0;i--){var l=c[i];if(!o.includes(l)){for(var u=e[l],d=0,b=l;b>l-n&&e[b-1]&&e[b-1]===u&&b%r!==0;b--)d++,a.push(b-1);for(var p=0,f=l;f<l+n&&e[f+1]&&e[f+1]===u&&(f+1)%r!==0;f++)p++,a.push(f+1);d+p>=n-1&&(a.push(l),o=o.concat(a)),a=[];for(var h=0,m=l;m>l-n*r&&e[m-r]&&e[m-r]===u;m-=r)h++,a.push(m-r);for(var g=0,j=l;j<l+n*r&&e[j+r]&&e[j+r]===u;j+=r)g++,a.push(j+r);h+g>=n-1&&(a.push(l),o=o.concat(a)),a=[];for(var v=0,O=l;O>l-n*(r+1)&&e[O-r-1]&&e[O-r-1]===u&&O%r!==0;O-=r+1)v++,a.push(O-r-1);for(var y=0,_=l;_<l+n*(r+1)&&e[_+r+1]&&e[_+r+1]===u&&(_+1)%r!==0;_+=r+1)y++,a.push(_+r+1);v+y>=n-1&&(a.push(l),o=o.concat(a)),a=[];for(var x=0,S=l;S>l-n*(r-1)&&e[S-r+1]&&e[S-r+1]===u&&(S+1)%r!==0;S-=r-1)x++,a.push(S-r+1);for(var C=0,N=l;N<l+n*(r-1)&&e[N+r-1]&&e[N+r-1]===u&&N%r!==0;N+=r-1)C++,a.push(N+r-1);x+C>=n-1&&(a.push(l),o=o.concat(a)),a=[]}}return o}(r[a-1].slots,p,H,J)}var L,z=r.map((function(t,e){var o=e?"Move #"+e:"Game start",c=a===e,s=e===r.length-1;return Object(g.jsx)("li",{children:Object(g.jsx)(wt,{boardParams:R,isSelected:c,slots:r[e].slots,transitions:s?u:null,flip:r[e].boardFlip,onClick:function(){return n(function(t){return function(e,n){ht(n()).length<2&&e(tt(t))}}(e))},title:o})},e)}));if(z=b?z:z.sort((function(t,e){return e.key-t.key})),G.length){var Y=0;G.forEach((function(t){"X"===p[t]&&Y++})),L=Y>G.length-Y?"Winner: X":Y<G.length-Y?"Winner: O":"Draw!"}else L=G.length||a!==p.length?"Next player: "+i:"Draw!";return Object(g.jsxs)("div",{className:St.a.game,children:[m,Object(g.jsx)(wt,{isMainBoard:!0,statusClass:w,boardParams:R,slots:p,flip:M,winIndexes:G,onClick:function(t){return C(t)},endTurnFunc:e,transitions:u,animations:d}),Object(g.jsxs)("div",{className:St.a.game_info,children:[Object(g.jsx)("div",{className:St.a.status,children:L}),Object(g.jsxs)("div",{className:St.a.controls,children:[j,y,Object(g.jsx)(_,{isOn:!b,onClick:function(){return n(et())}}),v,O]}),Object(g.jsx)("div",{className:St.a.scrollableY,children:Object(g.jsx)("ol",{className:St.a.moves,children:z})})]})]})}function kt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(e){return setTimeout((function(){return e({data:t})}),500)}))}var It=Object(v.b)("counter/fetchCount",function(){var t=Object(X.a)(A.a.mark((function t(e){var n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,kt(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Tt=Object(v.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(t){t.value+=1},decrement:function(t){t.value-=1},incrementByAmount:function(t,e){t.value+=e.payload}},extraReducers:function(t){t.addCase(It.pending,(function(t){t.status="loading"})).addCase(It.fulfilled,(function(t,e){t.status="idle",t.value+=e.payload}))}}),Ft=Tt.actions,Pt=Ft.increment,Bt=Ft.decrement,Et=Ft.incrementByAmount,qt=function(t){return t.counter.value},Mt=(Tt.reducer,n(26)),Rt=n.n(Mt);function Gt(){var t=Object(N.c)(qt),e=Object(N.b)(),n=Object(r.useState)("2"),a=Object(C.a)(n,2),o=a[0],c=a[1],s=Number(o)||0;return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:Rt.a.row,children:[Object(g.jsx)("button",{className:Rt.a.button,"aria-label":"Decrement value",onClick:function(){return e(Bt())},children:"-"}),Object(g.jsx)("span",{className:Rt.a.value,children:t}),Object(g.jsx)("button",{className:Rt.a.button,"aria-label":"Increment value",onClick:function(){return e(Pt())},children:"+"})]}),Object(g.jsxs)("div",{className:Rt.a.row,children:[Object(g.jsx)("input",{className:Rt.a.textbox,"aria-label":"Set increment amount",value:o,onChange:function(t){return c(t.target.value)}}),Object(g.jsx)("button",{className:Rt.a.button,onClick:function(){return e(Et(s))},children:"Add Amount"}),Object(g.jsx)("button",{className:Rt.a.asyncButton,onClick:function(){return e(It(s))},children:"Add Async"}),Object(g.jsx)("button",{className:Rt.a.button,onClick:function(){return e((t=s,function(e,n){qt(n())%2===1&&e(Et(t))}));var t},children:"Add If Odd Tbd"})]})]})}n(58);var Ht=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).state={items:{ConnectX:Xt,Tbd:Gt},itemSelected:null,playerInfos:null},t.handleClick=t.handleClick.bind(Object(b.a)(t)),t}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=this.state.playerInfos;console.log("componentDidMount",t),t||(t=h("playerInfos"),console.log("pseudo after loadState",t),t||(t=null),this.setState({playerInfos:t}),t||l.push("/redux-project/login"));var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}},{key:"handleClick",value:function(t){this.setState({itemSelected:t.target.name})}},{key:"render",value:function(){var t=this.state.playerInfos;console.log("render",t);var e=this.state.itemSelected?a.a.createElement(this.state.items[this.state.itemSelected],{playerInfos:t}):null;return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(S,{items:this.state.items,handleClick:this.handleClick}),Object(g.jsx)("div",{className:"main",children:e})]})}}]),n}(r.Component),Dt=function(){return Object(g.jsx)("h2",{className:"notFound",children:"Nothing to see here"})},Jt=n(18),Lt=n(21),zt=Object(Lt.b)({nav:y,counter:P,tictactoe:M,connectX:_t}),Yt=Object(v.d)({serializableCheck:!1}),Wt=Object(v.a)({reducer:function(t,e){return"nav/reset"===e.type&&(t=void 0),zt(t,e)},middleware:Object(Jt.a)(Yt)}),Kt="/redux-project";c.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(N.a,{store:Wt,children:Object(g.jsx)(s.b,{history:l,children:Object(g.jsxs)(s.c,{children:[Object(g.jsx)(s.a,{exact:!0,path:"".concat(Kt,"/login"),component:j}),Object(g.jsx)(s.a,{path:"".concat(Kt),component:Ht}),Object(g.jsx)(s.a,{path:"".concat(Kt,"/"),component:Dt})]})})})}),document.getElementById("root"))},8:function(t,e,n){t.exports={game:"ConnectX_game__1x_fZ",main:"ConnectX_main__6vhcL",statusHandler:"ConnectX_statusHandler__3YJ_C",previousStatus:"ConnectX_previousStatus__2I2T6",canEndTurn:"ConnectX_canEndTurn__AbWWA",endTurn:"ConnectX_endTurn__13PRx",redPlayerTurn:"ConnectX_redPlayerTurn__2yS_K",bluePlayerTurn:"ConnectX_bluePlayerTurn__3Aih7",board:"ConnectX_board__3OnTo",main_board:"ConnectX_main_board__1BL24",title:"ConnectX_title__2bStg",board_row:"ConnectX_board_row__CsIJA",slot:"ConnectX_slot__25hJA",disabledBoard:"ConnectX_disabledBoard__2gQ8q",slotFilled:"ConnectX_slotFilled__3GXCE",slotFilledX:"ConnectX_slotFilledX___bTyR",slotFilledO:"ConnectX_slotFilledO__MNApa",game_info:"ConnectX_game_info__2JF9V",controls:"ConnectX_controls__ekhdW",status:"ConnectX_status__2MWFR",moves:"ConnectX_moves__1ki_t",moves_board:"ConnectX_moves_board__22KjK",highlighted:"ConnectX_highlighted__B2e4K",selected:"ConnectX_selected__1Puyt","kbd-navigation":"ConnectX_kbd-navigation__35g11",scrollableY:"ConnectX_scrollableY__1Mm7t",flipR:"ConnectX_flipR__2HwCv",hidden:"ConnectX_hidden__q8zIi",win:"ConnectX_win__X-N9o",slotContent:"ConnectX_slotContent__GfqZP",scaleAnim:"ConnectX_scaleAnim__3zEhe",floating:"ConnectX_floating__D0otu","Slot-floating":"ConnectX_Slot-floating__2-Yy4",transition:"ConnectX_transition__38xtB",fadeInOnHover:"ConnectX_fadeInOnHover__2GqTp",flip:"ConnectX_flip__2PQK3",fadeout:"ConnectX_fadeout__2xFop",fall:"ConnectX_fall__13rRa"}}},[[60,1,2]]]);
//# sourceMappingURL=main.d4978bcb.chunk.js.map