(this["webpackJsonpredux-app"]=this["webpackJsonpredux-app"]||[]).push([[0],{16:function(t,e,n){t.exports={board_row:"Tictactoe_board_row__3rgFx",status:"Tictactoe_status__1yWkH",square:"Tictactoe_square__2FLKp",selected:"Tictactoe_selected__2J0dk",win:"Tictactoe_win__3iu36","kbd-navigation":"Tictactoe_kbd-navigation__1k7WA",game:"Tictactoe_game__1L0bM",game_info:"Tictactoe_game_info__3MppA",board:"Tictactoe_board__EHRYs",game_board:"Tictactoe_game_board__10zJy",moves:"Tictactoe_moves__1SQaE",scrollableY:"Tictactoe_scrollableY__Q9GYP"}},25:function(t,e,n){t.exports={row:"Counter_row__25RA2",value:"Counter_value__1LyDH",button:"Counter_button__1Mrat",textbox:"Counter_textbox__3xGUA",asyncButton:"Counter_asyncButton__24jSS Counter_button__1Mrat"}},26:function(t,e,n){t.exports={row:"Counter_row__-ob4V",value:"Counter_value__1mJ_F",button:"Counter_button__2N3Ru",textbox:"Counter_textbox__3t7Hj",asyncButton:"Counter_asyncButton__3xT0m Counter_button__2N3Ru"}},51:function(t,e,n){},56:function(t,e,n){t.exports={board_row:"Nav_board_row__3-19E",status:"Nav_status__2SMaQ",square:"Nav_square__l5M2q",selected:"Nav_selected__3hogA",win:"Nav_win__1dR1J","kbd-navigation":"Nav_kbd-navigation__3izzR",game:"Nav_game__8RKFz",game_info:"Nav_game_info__31PA2",board:"Nav_board__3uLy7",game_board:"Nav_game_board__3X1uY",moves:"Nav_moves__1bJFZ",scrollableY:"Nav_scrollableY__3DVvq"}},59:function(t,e,n){},61:function(t,e,n){"use strict";n.r(e);var r=n(4),a=n.n(r),o=n(35),c=n.n(o),s=(n(51),n(63)),i=n(23),l=Object(i.a)(),u=n(1),d=n(2),b=n(27),f=n(5),p=n(6),h=n(3),j=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).goToChat=function(e){e.preventDefault(),console.log(Object(b.a)(t));var n=t.pseudoInput.value;l.push("/redux-project/pseudo/".concat(n))},t}return Object(d.a)(n,[{key:"render",value:function(){var t=this;return Object(h.jsx)("div",{className:"connexionBox",onSubmit:function(e){return t.goToChat(e)},children:Object(h.jsxs)("form",{className:"connexion",children:[Object(h.jsx)("input",{type:"text",placeholder:"Pseudo",required:!0,ref:function(e){t.pseudoInput=e}}),Object(h.jsx)("button",{type:"submit",children:"GO"})]})})}}]),n}(a.a.Component),v=(n.p,n(10)),m=n(15),O=Object(m.c)({name:"nav",initialState:{},reducers:{reset:function(t){}}}),g=O.actions.reset,_=O.reducer;function x(t){return Object(h.jsxs)("label",{className:"switch",children:[Object(h.jsx)("input",{type:"checkbox",checked:t.isOn,onClick:t.onClick,readOnly:!0}),Object(h.jsx)("span",{className:"slider"})]})}function y(t){return Object(h.jsx)("button",{className:"reset",onClick:t.onClick,children:t.title})}n(56);function C(t){var e=Object(v.b)(),n=Object.keys(t.items).map((function(e,n){return Object(h.jsx)("button",{name:e,onClick:function(e){return t.handleClick(e)},children:e},n)}));return Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsx)("div",{className:"nav-items",children:n}),Object(h.jsx)(y,{title:"Reset all",onClick:function(){return e(g())}})]})}var N=n(20),w=n(8),k=n.n(w),S=n(13);function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(e){return setTimeout((function(){return e({data:t})}),500)}))}var A=Object(m.b)("counter/fetchCount",function(){var t=Object(S.a)(k.a.mark((function t(e){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),X=Object(m.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(t){t.value+=1},decrement:function(t){t.value-=1},incrementByAmount:function(t,e){t.value+=e.payload},reset:function(t){t.value=0}},extraReducers:function(t){t.addCase(A.pending,(function(t){t.status="loading"})).addCase(A.fulfilled,(function(t,e){t.status="idle",t.value+=e.payload}))}}),T=X.actions,q=T.increment,B=T.decrement,M=T.incrementByAmount,P=T.reset,F=function(t){return t.counter.value},G=X.reducer,R=n(25),D=n.n(R);function E(){var t=Object(v.c)(F),e=Object(v.b)(),n=Object(r.useState)("2"),a=Object(N.a)(n,2),o=a[0],c=a[1],s=Number(o)||0;return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:D.a.row,children:[Object(h.jsx)("button",{className:D.a.button,"aria-label":"Decrement value",onClick:function(){return e(B())},children:"-"}),Object(h.jsx)("span",{className:D.a.value,children:t}),Object(h.jsx)("button",{className:D.a.button,"aria-label":"Increment value",onClick:function(){return e(q())},children:"+"})]}),Object(h.jsxs)("div",{className:D.a.row,children:[Object(h.jsx)("input",{className:D.a.textbox,"aria-label":"Set increment amount",value:o,onChange:function(t){return c(t.target.value)}}),Object(h.jsx)("button",{className:D.a.button,onClick:function(){return e(M(s))},children:"Add Amount"}),Object(h.jsx)("button",{className:D.a.asyncButton,onClick:function(){return e(A(s))},children:"Add Async"}),Object(h.jsx)("button",{className:D.a.button,onClick:function(){return e((t=s,function(e,n){F(n())%2===1&&e(M(t))}));var t},children:"Add If Odd"}),Object(h.jsx)(y,{title:"Reset",onClick:function(){return e(P())}})]})]})}var J={history:[{squares:Array(9).fill(null)}],winSquares:[],xIsNext:!0,stepNumber:0,sortIsAsc:!0},L=Object(m.c)({name:"tictactoe",initialState:J,reducers:{handleClick:function(t,e){var n=t.history.slice(0,t.stepNumber+1),r=n[n.length-1].squares.slice();t.winSquares.length||r[e.payload]||(r[e.payload]=t.xIsNext?"X":"O",t.history=n.concat([{squares:r}]),t.stepNumber=n.length,t.xIsNext=!t.xIsNext)},jumpTo:function(t,e){t.stepNumber=e.payload,t.xIsNext=e.payload%2===0},toggleSort:function(t){t.sortIsAsc=!t.sortIsAsc},reset:function(t){t.history=[{squares:Array(9).fill(null)}],t.stepNumber=0}}}),Y=L.actions,z=Y.handleClick,H=Y.jumpTo,W=Y.toggleSort,Z=Y.reset,K=function(t){return t.tictactoe.history},Q=function(t){return t.tictactoe.stepNumber},V=function(t){return t.tictactoe.xIsNext},U=function(t){return t.tictactoe.sortIsAsc},$=L.reducer,tt=n(16),et=n.n(tt);var nt=function(t){var e="";return t.winSquares&&(e=t.winSquares.find((function(e){return e===t.index}))+1?" "+et.a.win:""),Object(h.jsx)("button",{className:et.a.square+e,onClick:t.onClick,children:t.value})},rt=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"renderSquare",value:function(t){var e=this;return Object(h.jsx)(nt,{index:t,value:this.props.squares[t],onClick:function(){return e.props.onClick(t)},winSquares:this.props.winSquares},t)}},{key:"createBoard",value:function(){for(var t=[],e=-1,n=0;n<3;n++){for(var r=[],a=0;a<3;a++)e++,r.push(this.renderSquare(e));t.push(Object(h.jsx)("div",{className:et.a.board_row,children:r},n))}return t}},{key:"render",value:function(){var t="undefined"===typeof this.props.isSelected,e=t?" "+et.a.game_board:"",n=this.props.isSelected?" "+et.a.selected:"",r=t?"":this.props.title;return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:et.a.board+e+n,children:this.createBoard()}),Object(h.jsx)("p",{children:r})]})}}]),n}(a.a.Component);function at(){var t=Object(v.b)(),e=Object(v.c)(K),n=Object(v.c)(Q),r=e[n],a=function(t){for(var e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],n=0;n<e.length;n++){var r=Object(N.a)(e[n],3),a=r[0],o=r[1],c=r[2];if(t[a]&&t[a]===t[o]&&t[a]===t[c])return e[n]}return[]}(r.squares),o=e.map((function(r,a){var o=a?"Move #"+a:"Game start",c=n===a;return Object(h.jsx)("li",{children:Object(h.jsx)(rt,{isSelected:c,squares:e[a].squares,onClick:function(){return t(H(a))},title:o})},a)}));o=Object(v.c)(U)?o:o.sort((function(t,e){return e.key-t.key}));var c,s=Object(v.c)(V);return c=a.length?"Winner: "+(s?"O":"X"):9!==n||a.length?"Next player: "+(s?"X":"O"):"Draw!",Object(h.jsxs)("div",{className:et.a.game,children:[Object(h.jsx)(rt,{squares:r.squares,winSquares:a,onClick:function(e){return t(z(e))}}),Object(h.jsxs)("div",{className:et.a.game_info,children:[Object(h.jsx)("div",{children:c}),Object(h.jsx)(x,{onClick:function(){return t(W())}}),Object(h.jsx)(y,{title:"Reset",onClick:function(){return t(Z())}}),Object(h.jsx)("div",{className:et.a.scrollableY,children:Object(h.jsx)("ol",{className:et.a.moves,children:o})})]})]})}var ot=n(7);function ct(t){var e=Object(ot.b)();return new Promise((function(n){Object(ot.a)(Object(ot.d)(e,"/players")).then((function(r){r.exists()?Object(ot.a)(Object(ot.d)(e,"/stepNumber")).then((function(r){r.exists()?r.val()!==t&&Object(ot.a)(Object(ot.d)(e,"/")).then((function(t){t.exists()?n(t.val()):console.log("No data available")})).catch((function(t){console.error(t)})):console.log("No data available")})).catch((function(t){console.error(t)})):n(null)})).catch((function(t){console.error(t)}))}))}var st={history:[{slots:Array(42).fill("null"),boardFlip:0}],stepNumber:0,gameSettings:{width:7,height:6,scoreTarget:4},sortIsAsc:!0,gravIsOn:!1,transitions:{slots:0,board:0},twoPlayersMode:!1,players:[]},it=Object(m.b)("connectX/readStepnumber",function(){var t=Object(S.a)(k.a.mark((function t(e){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ct(e);case 2:return n=t.sent,console.log("response",n),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),lt=Object(m.b)("connectX/readPlayers",Object(S.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){Object(ot.a)(Object(ot.d)(Object(ot.b)(),"/players")).then((function(e){if(e.exists()){var n=e.val();t(n)}else console.log("No data available")})).catch((function(t){console.error(t)}))}));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))),ut=Object(m.c)({name:"connectX",initialState:st,reducers:{writeData:function(t,e){},loadData:function(t){console.log("loadData")},handleClick:function(t,e){var n=t.stepNumber,r=t.history.slice(0,n+1),a=r[n],o=a.slots.slice(),c=e.payload;if("null"===o[c]){if(t.gravIsOn){if(a.boardFlip%2===0)var s=t.gameSettings.width,i=t.gameSettings.height;else s=t.gameSettings.height,i=t.gameSettings.width;for(var l=Array(s*i).fill(0),u=0,d=i-1;d>0;d--)if(c>=(d-1)*s&&c<=d*s-1){u=i-d;break}if(u){for(var b=c+u*s;b>c;b-=s){if("null"===o[b]){console.log(),c=b;break}u--}o[c]=t.stepNumber%2===0?"X":"O",u?l[c]=u:l=null}}if("null"===o[c]&&(o[c]=t.stepNumber%2===0?"X":"O"),t.history=r.concat([{slots:o,boardFlip:a.boardFlip}]),t.stepNumber=r.length,t.transitions=l&&-1!==l.find((function(t){return 0!==t}))?{slots:l,board:0}:{slots:0,board:0},t.twoPlayersMode){console.log("set db handleClick");var f=Object(ot.b)(),p=Object(ot.d)(f,"/history/");Object(ot.f)(p,t.history),p=Object(ot.d)(f,"/stepNumber/"),Object(ot.f)(p,t.stepNumber),p=Object(ot.d)(f,"/transitions/"),Object(ot.f)(p,t.transitions)}}},changeStep:function(t,e){t.stepNumber=e.payload,t.transitions={slots:0,board:0}},toggleSort:function(t){t.sortIsAsc=!t.sortIsAsc,t.transitions={slots:0,board:0}},toggleGravity:function(t,e){var n=e.payload,r=t.twoPlayersMode,a=Object(ot.b)(),o=Object(ot.d)(a,"/gravIsOn/");if(n&&(t.gravIsOn=!t.gravIsOn,Object(ot.f)(o,t.gravIsOn)),t.gravIsOn){var c=t.stepNumber,s=t.history.slice(0,c+1),i=s[c],l=i.slots.slice(),u=!1,d=t.gameSettings.width,b=t.gameSettings.height,f=Array(d*b).fill(0);i.boardFlip%2!==0&&(d=b);for(var p=1,h=l.length-d-1;h>=0;h-=d){for(var j=0;j<d;j++)for(var v=p;v>0;v--){var m=h-j,O=m+d*v;if(l[m]&&"null"===l[O]){l[O]=l[m],l[m]="null",u=!0,f[O]=v;break}}p++}u&&(s=s.slice(0,c),t.history=s.concat([{slots:l,boardFlip:i.boardFlip}]),t.stepNumber=s.length,t.transitions={slots:f,board:n?0:t.transitions.board},t.twoPlayersMode&&(console.log("set db toggleGravity"),o=Object(ot.d)(a,"/history/"),Object(ot.f)(o,t.history),o=Object(ot.d)(a,"/stepNumber/"),Object(ot.f)(o,t.stepNumber),o=Object(ot.d)(a,"/transitions/"),Object(ot.f)(o,t.transitions)))}else r&&Object(ot.f)(Object(ot.d)(Object(ot.b)(),"/transitions/"),{slots:0,board:0}),t.transitions={slots:0,board:0}},flipBoardState:function(t,e){var n=t.stepNumber,r=t.history.slice(0,n+1),a=r[n],o=a.slots.slice(),c=e.payload,s=a.boardFlip+c;if(-1===s&&(s=3),4===s&&(s=0),s%2===0)var i=t.gameSettings.height,l=t.gameSettings.width;else i=t.gameSettings.width,l=t.gameSettings.height;for(var u=o.slice(),d=l,b=o.length-1;b>=0;b-=i){for(var f=0;f<i;f++){var p=b-f;u[1===c?l*(p+1-(d-1)*i)-d:l*(d*i-1-p)+d-1]=o[p]}d--}if(r=r.slice(0,n),t.history=r.concat([{slots:u,boardFlip:s}]),t.stepNumber=r.length,t.transitions={slots:0,board:-90*c},!t.gravIsOn&&t.twoPlayersMode){console.log("set db flipBoard");var h=Object(ot.b)(),j=Object(ot.d)(h,"/history/");Object(ot.f)(j,t.history),j=Object(ot.d)(h,"/stepNumber/"),Object(ot.f)(j,t.stepNumber),j=Object(ot.d)(h,"/transitions/"),Object(ot.f)(j,t.transitions)}},setGameSettings:function(t,e){var n=e.payload;t.gameSettings=n,t.history=[{slots:Array(n.width*n.height).fill("null"),boardFlip:0}]},reset:function(t,e){e.payload?Object(ot.e)(Object(ot.d)(Object(ot.b)(),"/players/")):(t.history=t.history.slice(0,1),t.stepNumber=0,t.transitions={slots:0,board:0},t.gravIsOn=!1,t.sortIsAsc=!0)}},extraReducers:function(t){t.addCase(it.pending,(function(t){console.log("updateGameAsync pending")})).addCase(it.fulfilled,(function(t,e){console.log("updateGameAsync");var n=e.payload;if(null===n)return window.alert("Your opponent left! Reload the page to exit the current game"),void(t.twoPlayersMode=!1);t.history=n.history,t.stepNumber=n.stepNumber;var r=n.transitions;t.transitions={slots:r.slots,board:r.board},t.gravIsOn=n.gravIsOn})).addCase(lt.pending,(function(t){return console.log("requestGameAsync pending"),Object.assign({},t,{propOne:!0})})).addCase(lt.fulfilled,(function(t,e){console.log("requestGameAsync");var n=e.payload,r=Object.keys(n);if(1===r.length)t.players=[{pseudo:n[r[0]].pseudo,sign:"O"}],t.transitions={slots:0,board:0};else if(r.length>=2){var a=n[r[0]];console.log(a),t.players=[{pseudo:n[r[0]].pseudo,sign:"O"},{pseudo:n[r[1]].pseudo,sign:"X"}],t.twoPlayersMode=!0;var o=t.history.slice(0,1);t.history=o,t.stepNumber=0;var c={slots:0,board:0};t.transitions=c,t.gravIsOn=!0,console.log("set db requestGame");var s=Object(ot.b)(),i=Object(ot.d)(s,"/history/");Object(ot.f)(i,o),i=Object(ot.d)(s,"/stepNumber/"),Object(ot.f)(i,0),i=Object(ot.d)(s,"/transitions/"),Object(ot.f)(i,c),i=Object(ot.d)(s,"/gravIsOn/"),Object(ot.f)(i,!0)}}))}}),dt=ut.actions,bt=dt.handleClick,ft=dt.changeStep,pt=dt.toggleSort,ht=dt.toggleGravity,jt=dt.flipBoardState,vt=dt.setGameSettings,mt=(dt.syncBase,dt.loadData,dt.writeData),Ot=dt.reset,gt=function(t){return t.connectX.history},_t=function(t){return t.connectX.gameSettings},xt=function(t){return t.connectX.stepNumber},yt=function(t){return t.connectX.sortIsAsc},Ct=function(t){return t.connectX.gravIsOn},Nt=function(t){return t.connectX.transitions},wt=function(t){return t.connectX.players},kt=function(t){return t.connectX.twoPlayersMode},St=function(t){return function(e,n){e(jt(t)),Ct(n())&&e(ht(!1))}},It=ut.reducer,At=n(9),Xt=n.n(At);var Tt=function(t){var e=t.slotScore,n="",r=0;e&&(n="hasTransition ".concat(Xt.a.fall),r=Math.round(10*(.16+.189*Math.log(e)))/10);var a="null"!==t.value?"".concat(Xt.a.slotContent," ").concat("X"===t.value?Xt.a.slotContentX:Xt.a.slotContentO):"",o=t.winStyle?"wonSlot":"";return Object(h.jsx)("button",{className:"".concat(Xt.a.slot," ").concat(o),onClick:t.onClick,children:Object(h.jsx)("div",{style:{"--slotStartPos":"calc(".concat(-1*e*125,"% + ").concat(e,"px)"),"--speed":"".concat(r,"s")},className:"".concat(a," ").concat(n),onTransitionEnd:t.handleTransitionEnd})})},qt=n(39),Bt=n(46),Mt=Object(qt.a)({apiKey:"AIzaSyDVe3axD8Y3GnxcnsnDuDz_FHCKYJcu6gg",authDomain:"redux-project-98a9a.firebaseapp.com",databaseURL:"https://redux-project-98a9a-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"redux-project-98a9a",storageBucket:"redux-project-98a9a.appspot.com",messagingSenderId:"67646127878",appId:"1:67646127878:web:507ecc4c86993503ca2887",measurementId:"G-34QJSE84ZR"});Object(Bt.a)(Mt);function Pt(){var t=Array.from(document.querySelectorAll(".wonSlot"));console.log(t),t.forEach((function(t){t.classList.add(Xt.a.win)}))}var Ft=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).handleTransitionEnd=function(t){Pt()},t.renderSlot=function(e,n){var r,a=n?void 0:function(){return t.props.onClick(e)},o=n?t.props.winIndexes:null,c=!(!o||!o.includes(e)),s=t.props.transitions?t.props.transitions.slots:null,i=0;if(s&&"null"!==s[e]&&(i=s[e],n)){var l=s.filter((function(t){return"null"!==t})).sort((function(t,e){return e-t}))[0];e===s.findIndex((function(t){return t===l}))&&(r=function(e){return t.handleTransitionEnd(e)})}return Object(h.jsx)(Tt,{value:t.props.slots[e],onClick:a,slotScore:i,winStyle:c,handleTransitionEnd:r},e)},t.createBoard=function(e,n,r){for(var a=[],o=0,c=0;c<e.height;c++){for(var s=[],i=0;i<e.width;i++)s.push(t.renderSlot(o,r)),o++;a.push(Object(h.jsx)("div",{className:Xt.a.board_row,children:s},c))}var l=t.props.transitions&&t.props.transitions.board?t.props.transitions.board:0;return Object(h.jsx)("div",{style:{"--boardStartPos":"rotateZ(".concat(l,"deg)")},className:"\n              ".concat(0===l?"":"hasTransition ".concat(Xt.a.flip)," \n              ").concat(Xt.a.board," \n              ").concat(n?Xt.a.main_board:""," \n              ").concat(t.props.isSelected?Xt.a.selected:"","\n            "),onTransitionEnd:n&&r?function(){return t.handleTransitionEnd()}:void 0,children:a})},t.styleBoard=function(t,e){var n=Math.floor(.55*window.innerHeight/(e.height*t)),r=Math.floor(.55*window.innerHeight/(e.width*t));n=n<=r?n:r;var a=Math.round(e.height/130*10)/10;return a<=.5&&(a=0),{"--boardWidth":n*e.width+"px","--boardHeight":n*e.height+"px","--slotSize":n+1+"px","--fontSize":a+"em"}},t}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.isMainBoard}},{key:"componentDidUpdate",value:function(){var t=this.props.transitions;this.props.isMainBoard&&(t&&(t.slots||t.board)?Array.from(document.querySelectorAll(".hasTransition")).forEach((function(t){t.classList.remove(Xt.a.animate),setTimeout((function(){t.classList.add(Xt.a.animate)}),0)})):this.props.winIndexes.length&&Pt())}},{key:"render",value:function(){if(this.props.flip%2===0)var t=this.props.boardParams;else t={width:this.props.boardParams.height,height:this.props.boardParams.width};var e=this.props.isMainBoard,n=e?"":this.props.title,r=!(!e||!this.props.winIndexes.length);return Object(h.jsxs)("div",{style:e?this.styleBoard(1,t):this.styleBoard(4,t),className:e?Xt.a.main:"",children:[this.createBoard(t,e,r),Object(h.jsx)("p",{className:Xt.a.title,children:n})]})}}]),n}(a.a.Component),Gt=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).prepareInfos=function(e){e.preventDefault();var n={width:parseInt(t.width.value),height:parseInt(t.height.value),scoreTarget:parseInt(t.scoreTarget.value)};t.props.sendGameSettings(n),t.infosForm.reset()},t}return Object(d.a)(n,[{key:"render",value:function(){var t=this;return Object(h.jsxs)("form",{className:Xt.a.form,onSubmit:function(e){return t.prepareInfos(e)},ref:function(e){return t.infosForm=e},children:[Object(h.jsx)("input",{type:"text",pattern:"[0-9]*",maxLength:this.props.length,ref:function(e){return t.width=e}}),Object(h.jsx)("input",{type:"text",pattern:"[0-9]*",maxLength:this.props.length,ref:function(e){return t.height=e}}),Object(h.jsx)("input",{type:"text",pattern:"[0-9]*",maxLength:this.props.length,ref:function(e){return t.scoreTarget=e}}),Object(h.jsx)("button",{type:"submit",children:"Envoyer!"})]})}}]),n}(a.a.Component);function Rt(t){var e=Object(v.b)();e(mt());var n=Object(v.c)(gt),r=Object(v.c)(xt),a=n[r].slots,o=Object(v.c)(wt),c=Object(v.c)(kt);console.log("inGame",c);var s=t.pseudo,i=Object(h.jsx)(Gt,{sendGameSettings:function(t){return e((n=t,function(t){t(Ot()),t(vt(n))}));var n}}),l=Object(h.jsx)("button",{onClick:function(){return e(function(t){return function(e,n){Object(ot.f)(Object(ot.c)(Object(ot.d)(Object(ot.b)(),"players")),{pseudo:t}),e(lt());var r=setInterval((function(){kt(n())&&clearInterval(r),e(lt())}),4e3)}}(s))},children:"Request game"}),u=function(t){return e(bt(t))},d=function(){return e(ht(!0))},b=function(){return e(St(1))},f=function(){return e(St(-1))},p=r%2===0?"X":"O";if(console.log("players",o),o.length>0){var j=o.find((function(t){return t.pseudo===s}));console.log("myPlayer",j);var m=-1!==j;console.log("isPlayer",m);var O=2===o.length&&!m,g=1===o.length&&m;if(console.log("waitingForGame",g),console.log("gameInProgress",O),(g||c)&&(window.onunload=function(t){e(Ot(!0))},i=null),(O||m)&&(l=null),c)j.sign===p||(console.log("in game update"),e((function(t,e){setInterval((function(){kt(e())&&t(it(xt(e())))}),5500)})),u=function(){},d=function(){},b=function(){},f=function(){})}var _=Object(v.c)(_t),C=n[r].boardFlip,N={width:_.width,height:_.height},w=Object(v.c)(Nt),k=[],S=_.scoreTarget;if(r>=2*S-1){var I=C%2===0?N.width:N.height;k=function(t,e,n,r){var a=[],o=[],c=[];for(var s in e)e[s]!==t[s]&&c.push(parseInt(s));for(var i=c.length-1;i>=0;i--){var l=c[i];if(!o.includes(l)){for(var u=e[l],d=0,b=l;b>l-n&&"null"!==e[b-1]&&e[b-1]===u&&b%r!==0;b--)d++,a.push(b-1);for(var f=0,p=l;p<l+n&&"null"!==e[p+1]&&e[p+1]===u&&(p+1)%r!==0;p++)f++,a.push(p+1);d+f>=n-1&&(a.push(l),o=o.concat(a)),a=[];for(var h=0,j=l;j>l-n*r&&"null"!==e[j-r]&&e[j-r]===u;j-=r)h++,a.push(j-r);for(var v=0,m=l;m<l+n*r&&"null"!==e[m+r]&&e[m+r]===u;m+=r)v++,a.push(m+r);h+v>=n-1&&(a.push(l),o=o.concat(a)),a=[];for(var O=0,g=l;g>l-n*(r+1)&&"null"!==e[g-r-1]&&e[g-r-1]===u&&g%r!==0;g-=r+1)O++,a.push(g-r-1);for(var _=0,x=l;x<l+n*(r+1)&&"null"!==e[x+r+1]&&e[x+r+1]===u&&(x+1)%r!==0;x+=r+1)_++,a.push(x+r+1);O+_>=n-1&&(a.push(l),o=o.concat(a)),a=[];for(var y=0,C=l;C>l-n*(r-1)&&"null"!==e[C-r+1]&&e[C-r+1]===u&&(C+1)%r!==0;C-=r-1)y++,a.push(C-r+1);for(var N=0,w=l;w<l+n*(r-1)&&"null"!==e[w+r-1]&&e[w+r-1]===u&&w%r!==0;w+=r-1)N++,a.push(w+r-1);y+N>=n-1&&(a.push(l),o=o.concat(a)),a=[]}}return o}(n[r-1].slots,a,S,I)}var A,X=n.map((function(t,a){var o=a?"Move #"+a:"Game start",c=r===a,s=a&&a===n.length-1;return Object(h.jsx)("li",{children:Object(h.jsx)(Ft,{boardParams:N,isSelected:c,slots:n[a].slots,transitions:s?w:null,flip:n[a].boardFlip,onClick:function(){return e(function(t){return function(e,n){e(ft(t)),Ct(n())&&e(ht(!1))}}(a))},title:o})},a)})),T=Object(v.c)(yt);if(X=T?X:X.sort((function(t,e){return e.key-t.key})),k.length){var q=0;k.forEach((function(t){"X"===a[t]&&q++})),A=q>k.length-q?"Winner: X":q<k.length-q?"Winner: O":"Draw!"}else A=k.length||r!==a.length?"Next player: "+p:"Draw!";return Object(h.jsxs)("div",{className:Xt.a.game,children:[i,Object(h.jsx)(Ft,{isMainBoard:!0,boardParams:N,slots:a,transitions:w,flip:C,winIndexes:k,onClick:function(t){return u(t)}}),Object(h.jsxs)("div",{className:Xt.a.game_info,children:[Object(h.jsx)("div",{className:Xt.a.status,children:A}),Object(h.jsxs)("div",{className:Xt.a.controls,children:[l,Object(h.jsx)("button",{onClick:function(){return b()},children:"Flip right"}),Object(h.jsx)("button",{onClick:function(){return f()},children:"Flip left"}),Object(h.jsx)(x,{isOn:!T,onClick:function(){return e(pt())}}),Object(h.jsx)(x,{isOn:Object(v.c)(Ct),onClick:function(){return d()}}),Object(h.jsx)(y,{title:"Reset",onClick:function(){return e(Ot())}})]}),Object(h.jsx)("div",{className:Xt.a.scrollableY,children:Object(h.jsx)("ol",{className:Xt.a.moves,children:X})})]})]})}function Dt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(e){return setTimeout((function(){return e({data:t})}),500)}))}var Et=Object(m.b)("counter/fetchCount",function(){var t=Object(S.a)(k.a.mark((function t(e){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Dt(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Jt=Object(m.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(t){t.value+=1},decrement:function(t){t.value-=1},incrementByAmount:function(t,e){t.value+=e.payload}},extraReducers:function(t){t.addCase(Et.pending,(function(t){t.status="loading"})).addCase(Et.fulfilled,(function(t,e){t.status="idle",t.value+=e.payload}))}}),Lt=Jt.actions,Yt=Lt.increment,zt=Lt.decrement,Ht=Lt.incrementByAmount,Wt=function(t){return t.counter.value},Zt=(Jt.reducer,n(26)),Kt=n.n(Zt);function Qt(){var t=Object(v.c)(Wt),e=Object(v.b)(),n=Object(r.useState)("2"),a=Object(N.a)(n,2),o=a[0],c=a[1],s=Number(o)||0;return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:Kt.a.row,children:[Object(h.jsx)("button",{className:Kt.a.button,"aria-label":"Decrement value",onClick:function(){return e(zt())},children:"-"}),Object(h.jsx)("span",{className:Kt.a.value,children:t}),Object(h.jsx)("button",{className:Kt.a.button,"aria-label":"Increment value",onClick:function(){return e(Yt())},children:"+"})]}),Object(h.jsxs)("div",{className:Kt.a.row,children:[Object(h.jsx)("input",{className:Kt.a.textbox,"aria-label":"Set increment amount",value:o,onChange:function(t){return c(t.target.value)}}),Object(h.jsx)("button",{className:Kt.a.button,onClick:function(){return e(Ht(s))},children:"Add Amount"}),Object(h.jsx)("button",{className:Kt.a.asyncButton,onClick:function(){return e(Et(s))},children:"Add Async"}),Object(h.jsx)("button",{className:Kt.a.button,onClick:function(){return e((t=s,function(e,n){Wt(n())%2===1&&e(Ht(t))}));var t},children:"Add If Odd Tbd"})]})]})}n(59);var Vt=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).state={items:{Counter:E,TicTacToe:at,ConnectX:Rt,Tbd:Qt},itemSelected:null},t.handleClick=t.handleClick.bind(Object(b.a)(t)),t}return Object(d.a)(n,[{key:"handleClick",value:function(t){this.setState({itemSelected:t.target.name})}},{key:"render",value:function(){var t=this.state.itemSelected?a.a.createElement(this.state.items[this.state.itemSelected],{pseudo:this.props.match.params.pseudo}):null;return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(C,{items:this.state.items,handleClick:this.handleClick}),Object(h.jsx)("div",{className:"main",children:t})]})}}]),n}(r.Component),Ut=function(){return Object(h.jsx)("h2",{className:"notFound",children:"Nothing to see here"})},$t=n(18),te=n(21),ee=Object(te.b)({nav:_,counter:G,tictactoe:$,connectX:It}),ne=Object(m.d)({serializableCheck:!1}),re=Object(m.a)({reducer:function(t,e){return"nav/reset"===e.type&&(t=void 0),ee(t,e)},middleware:Object($t.a)(ne)}),ae="/redux-project";!function(){try{var t=localStorage.getItem("state");if(null===t)return;JSON.parse(t)}catch(e){return}}();re.subscribe((function(){!function(t){try{var e=JSON.stringify(t);localStorage.setItem("state",e)}catch(n){console.log(n)}}(re.getState())})),c.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(v.a,{store:re,children:Object(h.jsx)(s.b,{history:l,children:Object(h.jsxs)(s.c,{children:[Object(h.jsx)(s.a,{exact:!0,path:"".concat(ae,"/"),component:j}),Object(h.jsx)(s.a,{path:"".concat(ae,"/pseudo/:pseudo"),component:Vt}),Object(h.jsx)(s.a,{component:Ut})]})})})}),document.getElementById("root"))},9:function(t,e,n){t.exports={game:"ConnectX_game__1x_fZ",form:"ConnectX_form__34LiB",main:"ConnectX_main__6vhcL",main_board:"ConnectX_main_board__1BL24",title:"ConnectX_title__2bStg",board:"ConnectX_board__3OnTo",board_row:"ConnectX_board_row__CsIJA",slot:"ConnectX_slot__25hJA",slotContent:"ConnectX_slotContent__GfqZP",slotContentX:"ConnectX_slotContentX__18XTw",slotContentO:"ConnectX_slotContentO__1evBh",win:"ConnectX_win__X-N9o",scaleAnim:"ConnectX_scaleAnim__3zEhe",game_info:"ConnectX_game_info__2JF9V",controls:"ConnectX_controls__ekhdW",status:"ConnectX_status__2MWFR",moves:"ConnectX_moves__1ki_t",selected:"ConnectX_selected__1Puyt","kbd-navigation":"ConnectX_kbd-navigation__35g11",scrollableY:"ConnectX_scrollableY__1Mm7t",flipR:"ConnectX_flipR__2HwCv",animate:"ConnectX_animate__3ZyN7",flip:"ConnectX_flip__2PQK3",fall:"ConnectX_fall__13rRa"}}},[[61,1,2]]]);
//# sourceMappingURL=main.e221700c.chunk.js.map